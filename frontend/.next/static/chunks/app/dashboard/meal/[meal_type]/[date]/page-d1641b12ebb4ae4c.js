(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5458],{3661:function(e,r,s){Promise.resolve().then(s.bind(s,7071))},7071:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return es}});var t=s(7437),a=s(355),n=s(9622),l=s(1881),i=s(2329),d=s(2360),o=s(4920),m=s(5622),u=s(2265),c=s(6463),x=s(4297),g=s(8354),h=s(4459);s(4590);var f=s(8064),b=(0,f.$)("86a6695be0bfe7cbf23795106db8997c1ed9aec4"),p=()=>{let e=(0,c.useRouter)(),r=(0,x.TL)(),s=(0,x.CG)(e=>e.license.license),a=(0,x.CG)(e=>e.load.set_loading);(0,u.useEffect)(()=>{a&&n()},[a,r]);let n=async()=>{if(!s||"free"===s){e.push("/dashboard/premium");return}try{let e=await b();if("error"in e){r((0,g.fz)({message:e.error,type:"error"})),setTimeout(()=>r((0,g.Qu)()),3e3);return}"message"in e&&(r((0,h.wc)()),r((0,h.Td)(e.data)))}catch(e){r((0,g.fz)({message:"An error occurred.",type:"error"})),setTimeout(()=>r((0,g.Qu)()),3e3)}};return(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsxs)("button",{className:"w-[60px] h-[50px] cursor-pointer p-3 bg-gradient-to-b from-cyan-300 to-cyan-500 hover:from-cyan-400 hover:to-cyan-600 shadow-md rounded-lg flex flex-col items-center",onClick:n,children:[(0,t.jsx)("p",{className:"text-[10px] font-normal text-white shadow-text",children:" Meal"}),(0,t.jsx)("p",{className:"text-sm font-bold text-white shadow-text",children:"Set"})]}),(0,t.jsx)("span",{className:"absolute top-[-10px] right-[-10px] text-[8px] bg-gradient-to-b from-gray-200 to-gray-400 text-black px-1 py-0.5 rounded-full font-bold",children:"Premium"})]})},v=s(4839),y=s(9381),j=s(1942),N=s(4245),w=(0,f.$)("6a87c37439f4089f529f7fabd394372ee953399e"),_=s(4646);let C=N.Ry().shape({name:N.Z_().max(30,"Name must be less than 30 characters").required("Name is required!"),cal:N.Rx().min(1,"Calories must be greater than 0").required("Calories are required!"),g_per_serving:N.Rx().nullable(),carb:N.Rx().min(0,"Value must be 0 or greater").required("Carb is required"),fat:N.Rx().min(0,"Value must be 0 or greater").required("Fat is required"),protein:N.Rx().min(0,"Value must be 0 or greater").required("Protein is required"),sugars:N.Rx().min(0,"Value must be 0 or greater").required("Sugars is required"),dietary_fiber:N.Rx().min(0,"Value must be 0 or greater").required("Dietary fiber is required"),salt:N.Rx().min(0,"Value must be 0 or greater").required("Salt is required"),sodium:N.Rx().min(0,"Value must be 0 or greater").required("Sodium is required"),potassium:N.Rx().min(0,"Value must be 0 or greater").required("Potassium is required"),calcium:N.Rx().min(0,"Value must be 0 or greater").required("Calcium is required"),magnesium:N.Rx().min(0,"Value must be 0 or greater").required("Magnesium is required"),iron:N.Rx().min(0,"Value must be 0 or greater").required("Iron is required"),zinc:N.Rx().min(0,"Value must be 0 or greater").required("Zinc is required"),vitamin_a:N.Rx().min(0,"Value must be 0 or greater").required("Vitamin A is required"),vitamin_d:N.Rx().min(0,"Value must be 0 or greater").required("Vitamin D is required"),vitamin_e:N.Rx().min(0,"Value must be 0 or greater").required("Vitamin E is required"),vitamin_b1:N.Rx().min(0,"Value must be 0 or greater").required("Vitamin B1 is required"),vitamin_b2:N.Rx().min(0,"Value must be 0 or greater").required("Vitamin B2 is required"),vitamin_b12:N.Rx().min(0,"Value must be 0 or greater").required("Vitamin B12 is required"),vitamin_b6:N.Rx().min(0,"Value must be 0 or greater").required("Vitamin B6 is required"),vitamin_c:N.Rx().min(0,"Value must be 0 or greater").required("Vitamin C is required"),niacin:N.Rx().min(0,"Value must be 0 or greater").required("Niacin is required"),cholesterol:N.Rx().min(0,"Value must be 0 or greater").required("Cholesterol is required"),saturated_fat:N.Rx().min(0,"Value must be 0 or greater").required("Saturated fat is required"),polyunsaturated_fat:N.Rx().min(0,"Value must be 0 or greater").required("Polyunsaturated fat is required"),monounsaturated_fat:N.Rx().min(0,"Value must be 0 or greater").required("Monounsaturated fat is required")});function F(){let e=(0,x.TL)(),[r,s]=(0,u.useState)(!1),[a,n]=(0,u.useState)(!1),l=(0,y.TA)({initialValues:{name:"",cal:1,g_per_serving:null,carb:0,fat:0,protein:0,sugars:0,dietary_fiber:0,salt:0,sodium:0,potassium:0,calcium:0,magnesium:0,iron:0,zinc:0,vitamin_a:0,vitamin_d:0,vitamin_e:0,vitamin_b1:0,vitamin_b2:0,vitamin_b12:0,vitamin_b6:0,vitamin_c:0,niacin:0,cholesterol:0,saturated_fat:0,polyunsaturated_fat:0,monounsaturated_fat:0},validationSchema:C,onSubmit:async r=>{try{e((0,_.ly)(!0));let t=await w(r);"error"in t?(e((0,g.fz)({message:t.error,type:"error"})),setTimeout(()=>e((0,g.Qu)()),4e3)):"message"in t&&(e((0,g.fz)({message:t.message,type:"success"})),setTimeout(()=>e((0,g.Qu)()),3e3),s(!1))}catch(r){e((0,g.fz)({message:"An error occurred while creating the custom food.",type:"error"})),setTimeout(()=>e((0,g.Qu)()),3e3)}finally{e((0,_.ly)(!1))}}});return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{className:"flex items-center px-3 py-1 text-xs font-medium text-white bg-gradient-to-r from-orange-400 to-orange-600 rounded-md shadow hover:from-orange-500 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",onClick:()=>s(!0),children:[(0,t.jsx)(j.wEH,{className:"mr-1"}),"Create Custom Item"]}),r&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto flex justify-center items-center",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsxs)("div",{className:"relative z-50 bg-white rounded-lg w-full max-w-lg p-6 mx-4 my-8",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold leading-9 tracking-tight mb-4",children:"Create Custom Food"}),(0,t.jsx)("p",{className:"text-sm mb-2 text-red-600",children:"Note: Please ensure the nutritional information is accurate."}),(0,t.jsxs)("form",{onSubmit:l.handleSubmit,className:"h-[510px] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Name *"}),(0,t.jsxs)("div",{className:"w-2/3",children:[(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:l.values.name,onChange:l.handleChange,onBlur:l.handleBlur,className:(0,v.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":l.touched.name&&l.errors.name}),autoComplete:"off"}),l.errors.name&&l.touched.name&&(0,t.jsx)("p",{className:"text-red-500 text-xs",children:l.errors.name})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[(0,t.jsx)("label",{htmlFor:"cal",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Calories *"}),(0,t.jsxs)("div",{className:"w-2/3",children:[(0,t.jsx)("input",{type:"number",id:"cal",name:"cal",value:l.values.cal,onChange:l.handleChange,onBlur:l.handleBlur,className:(0,v.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":l.touched.cal&&l.errors.cal}),autoComplete:"off"}),l.errors.cal&&l.touched.cal&&(0,t.jsx)("p",{className:"text-red-500 text-xs",children:l.errors.cal})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[(0,t.jsx)("label",{htmlFor:"g_per_serving",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Grams per Serving"}),(0,t.jsxs)("div",{className:"w-2/3",children:[(0,t.jsx)("input",{type:"number",id:"g_per_serving",name:"g_per_serving",value:l.values.g_per_serving||"",onChange:l.handleChange,onBlur:l.handleBlur,className:(0,v.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":l.touched.g_per_serving&&l.errors.g_per_serving}),autoComplete:"off"}),l.errors.g_per_serving&&l.touched.g_per_serving&&(0,t.jsx)("p",{className:"text-red-500 text-xs",children:l.errors.g_per_serving})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[(0,t.jsx)("label",{htmlFor:"carb",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Carbs (g)"}),(0,t.jsxs)("div",{className:"w-2/3",children:[(0,t.jsx)("input",{type:"number",id:"carb",name:"carb",value:l.values.carb,onChange:l.handleChange,onBlur:l.handleBlur,className:(0,v.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":l.touched.carb&&l.errors.carb}),autoComplete:"off"}),l.errors.carb&&l.touched.carb&&(0,t.jsx)("p",{className:"text-red-500 text-xs",children:l.errors.carb})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[(0,t.jsx)("label",{htmlFor:"fat",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Fat (g)"}),(0,t.jsxs)("div",{className:"w-2/3",children:[(0,t.jsx)("input",{type:"number",id:"fat",name:"fat",value:l.values.fat,onChange:l.handleChange,onBlur:l.handleBlur,className:(0,v.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":l.touched.fat&&l.errors.fat}),autoComplete:"off"}),l.errors.fat&&l.touched.fat&&(0,t.jsx)("p",{className:"text-red-500 text-xs",children:l.errors.fat})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[(0,t.jsx)("label",{htmlFor:"protein",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Protein (g)"}),(0,t.jsxs)("div",{className:"w-2/3",children:[(0,t.jsx)("input",{type:"number",id:"protein",name:"protein",value:l.values.protein,onChange:l.handleChange,onBlur:l.handleBlur,className:(0,v.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":l.touched.protein&&l.errors.protein}),autoComplete:"off"}),l.errors.protein&&l.touched.protein&&(0,t.jsx)("p",{className:"text-red-500 text-xs",children:l.errors.protein})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"button",className:"mt-2 mb-1 text-sm font-medium text-blue-500 underline hover:text-blue-700 focus:outline-none",onClick:()=>n(!a),children:a?"Hide Other Nutrients":"Show Other Nutrients"})}),a&&(0,t.jsx)(t.Fragment,{children:["sugars","dietary_fiber","salt","sodium","potassium","calcium","magnesium","iron","zinc","vitamin_a","vitamin_d","vitamin_e","vitamin_b1","vitamin_b2","vitamin_b12","vitamin_b6","vitamin_c","niacin","cholesterol","saturated_fat","polyunsaturated_fat","monounsaturated_fat"].map(e=>(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[(0,t.jsx)("label",{htmlFor:e,className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:e.replace(/_/g," ").toUpperCase()}),(0,t.jsxs)("div",{className:"w-2/3",children:[(0,t.jsx)("input",{type:"number",id:e,name:e,value:null!==l.values[e]&&void 0!==l.values[e]?l.values[e]:"",onChange:l.handleChange,onBlur:l.handleBlur,className:(0,v.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":l.touched[e]&&l.errors[e]}),autoComplete:"off"}),l.touched[e]&&l.errors[e]&&(0,t.jsx)("p",{className:"text-red-500 text-xs",children:l.errors[e]})]})]},e))}),(0,t.jsx)("section",{className:"w-full flex flex-col gap-y-3 justify-start items-end lg:items-center lg:flex-row lg:gap-y-0 lg:justify-between",children:(0,t.jsx)("button",{type:"submit",className:"flex w-full order-1 lg:order-2 lg:w-fit justify-center rounded-md bg-green-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:"Create"})})]}),(0,t.jsx)("button",{className:"absolute top-4 right-4 bg-gray-300 text-gray-700 p-1 rounded-full text-xs",onClick:()=>s(!1),children:"✕"})]})]})]})}var T=s(5009),k=()=>(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Step 1: Search for Food"})}),(0,t.jsx)(i.Z,{}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"mr-1",children:(0,t.jsx)(d.Z,{})}),(0,t.jsx)("div",{className:"mr-1",children:(0,t.jsx)(o.Z,{})}),(0,t.jsx)("div",{className:"mr-1",children:(0,t.jsx)(m.Z,{})}),(0,t.jsx)("div",{className:"mr-1",children:(0,t.jsx)(p,{})})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"mr-1",children:(0,t.jsx)(F,{})}),(0,t.jsx)("div",{className:"mr-1",children:(0,t.jsx)(T.r,{})})]})]}),V=s(3438),S=(0,f.$)("fad9de3b23c5d88a1bcb45ade664b3ffae692138"),q=e=>{let{date:r,meal_type:s,meal_set:a}=e;(0,c.useRouter)();let n=(0,x.TL)(),l=async()=>{try{n((0,_.Tr)(!0));let e=await S({date:r,meal_type:s,meal_set_id:a.meal_set_id});if("error"in e){n((0,g.fz)({message:e.error,type:"error"})),setTimeout(()=>n((0,g.Qu)()),3e3);return}"message"in e&&(n((0,g.fz)({message:e.message,type:"success"})),setTimeout(()=>n((0,g.Qu)()),4e3))}catch(e){n((0,g.fz)({message:"An error occurred while registering the meal.",type:"error"})),setTimeout(()=>n((0,g.Qu)()),3e3)}finally{n((0,_.Tr)(!1))}},i=a.meal_pres.reduce((e,r)=>e+(r.intake_cal||0),0);return(0,t.jsxs)("td",{className:"relative px-2 py-2 text-sm text-gray-900 truncate max-w-xs hover:text-gray-400 cursor-pointer",title:a.meal_set_name,onClick:l,children:[(0,t.jsx)("span",{className:"font-semibold",children:a.meal_set_name}),(0,t.jsxs)("span",{children:[" (Total: ",Math.round(i)," kcal)"]})]})},z=s(6356),R=(0,f.$)("27f90133d70450b99ed179ddee9da2d5994ad85f"),M=e=>{let{id:r}=e,s=(0,x.TL)(),a=async()=>{try{s((0,_.Dv)(!0));let e=await R(r);if("error"in e){s((0,g.fz)({message:e.error,type:"error"})),setTimeout(()=>s((0,g.Qu)()),3e3);return}if("detail"in e){s((0,g.fz)({message:e.detail,type:"error"})),setTimeout(()=>s((0,g.Qu)()),3e3);return}"message"in e&&(s((0,g.fz)({message:e.message,type:"success"})),setTimeout(()=>s((0,g.Qu)()),3e3),s((0,h.Xl)()))}catch(e){s((0,g.fz)({message:"An error occurred while deleting the meal set.",type:"error"})),setTimeout(()=>s((0,g.Qu)()),3e3)}finally{s((0,_.Dv)(!1))}};return(0,t.jsx)("div",{className:"flex items-center gap-x-2 p-2 ",children:(0,t.jsx)("button",{className:"hover:text-red-800 transition",onClick:a,children:(0,t.jsx)(z.I0,{size:15})})})},Z=e=>{let{meal_type:r,date:s}=e,a=(0,x.CG)(e=>e.food_meal.meal_set_list),[n,l]=(0,u.useState)(null);return(0,t.jsx)(t.Fragment,{children:a&&(0,t.jsx)("div",{className:"lg:mx-auto lg:w-full lg:max-w-md",children:(0,t.jsxs)("div",{className:"bg-white border border-gray-300 rounded-md",children:[(0,t.jsx)("div",{className:"bg-green-100 px-4 py-2 text-left text-xs font-medium text-gray-500 rounded-t-md",children:"Select Meal Set"}),(0,t.jsx)("div",{className:"flex flex-col h-56 overflow-y-auto",children:a.length>0?(0,t.jsx)("table",{className:"min-w-full divide-y divide-gray-200",children:(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,t.jsxs)("tr",{className:"relative hover:bg-gray-100",onMouseEnter:()=>l(e.meal_set_id),onMouseLeave:()=>l(null),children:[(0,t.jsx)(q,{meal_set:e,date:s,meal_type:r}),(0,t.jsx)("td",{className:"px-2 py-2 text-center text-xs text-gray-900",children:(0,t.jsx)("a",{href:"/dashboard/meal-set/".concat(e.meal_set_id),className:"text-blue-500 hover:underline",children:"edit"})}),(0,t.jsx)("td",{className:"px-2 py-2 text-center text-xs text-red-600",children:(0,t.jsx)(M,{id:e.meal_set_id})}),n===e.meal_set_id&&(0,t.jsx)("td",{colSpan:3,className:"absolute top-full left-0 w-1/2 bg-white border-2 border-green-500 rounded shadow-lg z-10",children:(0,t.jsx)("div",{className:"border-2 border-green-500 p-2 rounded-md bg-green-50",children:(0,t.jsx)("ul",{children:e.meal_pres.map((e,r)=>{var s;return(0,t.jsx)("li",{className:"text-xs text-gray-700 truncate",children:e.food?e.food.name:null===(s=e.fat_secret_food)||void 0===s?void 0:s.name},r)})})})})]},e.meal_set_id))})}):(0,t.jsx)("p",{className:"text-gray-500 p-4",children:"No meal set created yet"})})]})})})},B=e=>{let{date:r,meal_type:s}=e;return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Step 2: Select Foods for Your Meal"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(V.Z,{}),(0,t.jsx)(Z,{date:r,meal_type:s})]})]})},Q=(0,f.$)("813f4d442d2c9b92710ddf1212296598abc28c6a");let E=N.Ry().shape({grams:N.Rx().nullable().transform((e,r)=>""===r?null:r).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:r}=this.parent;return null!==e||null!==r}),servings:N.Rx().nullable().transform((e,r)=>""===r?null:r).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:r}=this.parent;return null!==e||null!==r})}),P={grams:null,servings:1};var G=e=>{var r,s;let{date:a,meal_type:n}=e;(0,c.useRouter)();let l=(0,x.TL)(),i=(0,x.CG)(e=>{var r;return null===(r=e.food_meal)||void 0===r?void 0:r.used_food}),[d,o]=(0,u.useState)(!1),[m,f]=(0,u.useState)(!1),b=(0,x.CG)(e=>e.load.custom_food_loading);(0,u.useEffect)(()=>{l((0,h.Fe)())},[b]);let p=(0,y.TA)({initialValues:P,validationSchema:E,onSubmit:async e=>{if(i)try{l((0,_.Tr)(!0)),l((0,_.yP)(!0));let r=await Q({...e,food:i.id,date:a,meal_type:n});"error"in r?(l((0,g.fz)({message:r.error,type:"error"})),setTimeout(()=>l((0,g.Qu)()),3e3)):"message"in r&&(l((0,g.fz)({message:r.message,type:"success"})),setTimeout(()=>l((0,g.Qu)()),4e3),l((0,h.Fe)()))}catch(e){l((0,g.fz)({message:"An error occurred while registering the meal.",type:"error"})),setTimeout(()=>l((0,g.Qu)()),3e3)}finally{l((0,_.Tr)(!1)),l((0,_.yP)(!1))}else{l((0,g.fz)({message:"You need to choose food.",type:"error"})),setTimeout(()=>l((0,g.Qu)()),3e3);return}}}),j=e=>{"custom"===e?f(!m):(p.setFieldValue("servings",e),p.setFieldValue("grams",null),o(!1))};return(0,t.jsx)(t.Fragment,{children:i&&(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,t.jsx)("div",{className:"text-gray-700 font-medium items-start text-base",children:i.name}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(i.protein)," g F: ",Math.round(i.fat)," g C: ",Math.round(i.carb)," g (",Math.round(i.cal)," kcal) / serving"]})]}),(0,t.jsxs)("form",{onSubmit:p.handleSubmit,className:"space-y-6 mt-4",children:[(0,t.jsxs)("div",{children:[i.g_per_serving?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:(0,v.Z)(d?"block":"hidden"),children:[(0,t.jsx)("input",{id:"grams",name:"grams",type:"number",onChange:e=>{let r=e.target.value;p.setFieldValue("grams",""===r?null:parseFloat(r)),""!==r&&p.setFieldValue("servings",null)},onBlur:p.handleBlur,value:null!==(r=p.values.grams)&&void 0!==r?r:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,t.jsx)("span",{className:"text-[15px]",children:" (g)"})]}),p.touched.grams&&p.errors.grams?(0,t.jsx)("div",{className:"text-red-600 text-sm",children:p.errors.grams}):null]}):null,(0,t.jsxs)("div",{className:(0,v.Z)(d?"hidden":"block"),children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:[.25,.5,.75,1,1.5,2,3].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>j(e),className:(0,v.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",p.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,t.jsxs)("div",{className:"flex mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>j("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{id:"servings",name:"servings",type:"number",onChange:e=>{let r=e.target.value;p.setFieldValue("servings",""===r?null:parseFloat(r)),""!==r&&p.setFieldValue("grams",null)},onBlur:p.handleBlur,value:null!==(s=p.values.servings)&&void 0!==s?s:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,t.jsx)("span",{className:"text-[15px]",children:" (servings)"})]})]}),p.touched.servings&&p.errors.servings?(0,t.jsx)("div",{className:"text-red-600 text-sm",children:p.errors.servings}):null]})]}),i.g_per_serving?(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"button",className:"w-[160px] inline-flex justify-center py-1 px-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>{o(!d),d?(p.setFieldValue("grams",null),p.setFieldValue("servings",null)):(p.setFieldValue("grams",null),p.setFieldValue("servings",1),f(!1))},children:d?"Input by Servings":"Input by Grams"})}):null,(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Register Meal"})})]})]})})};let A=N.Ry().shape({grams:N.Rx().nullable().transform((e,r)=>""===r?null:r).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:r}=this.parent;return null!==e||null!==r}),servings:N.Rx().nullable().transform((e,r)=>""===r?null:r).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:r}=this.parent;return null!==e||null!==r})}),L={grams:null,servings:null};var I=e=>{var r,s;let{date:a,meal_type:n}=e;(0,c.useRouter)();let l=(0,x.TL)(),i=(0,x.CG)(e=>{var r;return null===(r=e.food_meal)||void 0===r?void 0:r.used_fatsecret_food}),[d,o]=(0,u.useState)(!1),m=(0,y.TA)({initialValues:L,validationSchema:A,onSubmit:async e=>{if(i)try{l((0,_.Tr)(!0)),l((0,_.yP)(!0));let r=await Q({...e,fat_secret_food:i.id,date:a,meal_type:n});"error"in r?(l((0,g.fz)({message:r.error,type:"error"})),setTimeout(()=>l((0,g.Qu)()),3e3)):"message"in r&&(l((0,g.fz)({message:r.message,type:"success"})),setTimeout(()=>l((0,g.Qu)()),4e3),l((0,h.zo)()))}catch(e){l((0,g.fz)({message:"An error occurred while registering the meal.",type:"error"})),setTimeout(()=>l((0,g.Qu)()),3e3)}finally{l((0,_.Tr)(!1)),l((0,_.yP)(!1))}else{l((0,g.fz)({message:"You need to choose food.",type:"error"})),setTimeout(()=>l((0,g.Qu)()),3e3);return}}}),f=e=>{"custom"===e?o(!d):(m.setFieldValue("servings",e),m.setFieldValue("grams",null),o(!1))};return(0,t.jsx)(t.Fragment,{children:i&&(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,t.jsxs)("div",{className:"text-gray-700 font-medium items-start text-base",children:[i.name,i.brand_name?(0,t.jsxs)(t.Fragment,{children:[" (",i.brand_name,")"]}):(0,t.jsxs)(t.Fragment,{children:[" (",i.type,")"]})]}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(i.protein)," g F: ",Math.round(i.fat)," g C: ",Math.round(i.carb)," g (",Math.round(i.cal)," kcal) / ",i.unit]})]}),(0,t.jsxs)("form",{onSubmit:m.handleSubmit,className:"space-y-6 mt-4",children:[(0,t.jsx)("div",{children:"100g"===i.unit?(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{id:"grams",name:"grams",type:"number",onChange:e=>{let r=e.target.value;m.setFieldValue("grams",""===r?null:parseFloat(r)),""!==r&&m.setFieldValue("servings",null)},onBlur:m.handleBlur,value:null!==(r=m.values.grams)&&void 0!==r?r:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",(0,t.jsx)("span",{className:"text-[15px]",children:" (g)"}),m.touched.grams&&m.errors.grams?(0,t.jsx)("div",{className:"text-red-600 text-sm",children:m.errors.grams}):null]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2 ",children:[.25,.5,.75,1,1.5,2,3].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>f(e),className:(0,v.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",m.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,t.jsxs)("div",{className:"flex mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>f("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{id:"servings",name:"servings",type:"number",onChange:e=>{let r=e.target.value;m.setFieldValue("servings",""===r?null:parseFloat(r)),""!==r&&m.setFieldValue("grams",null)},onBlur:m.handleBlur,value:null!==(s=m.values.servings)&&void 0!==s?s:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",(0,t.jsxs)("span",{className:"text-[15px]",children:[" (",i.unit,")"]})]})]}),m.touched.servings&&m.errors.servings?(0,t.jsx)("div",{className:"text-red-600 text-sm",children:m.errors.servings}):null]})}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Register Meal"})})]})]})})},$=e=>{let{date:r,meal_type:s}=e;return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Step 3: Register Your Meal"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(G,{date:r,meal_type:s}),(0,t.jsx)(I,{date:r,meal_type:s})]})]})},D=s(8322),Y=s(6037),O=s(4763),X=s(2837),H=e=>{let{date:r,meal_type:s}=e,a=(0,x.TL)(),[n,l]=(0,u.useState)([]),i=(0,x.CG)(e=>e.load.meal_loading);(0,u.useEffect)(()=>{(async()=>{try{let e=await (0,D.x)(r,s);if("error"in e){a((0,g.fz)({message:e.error,type:"error"})),setTimeout(()=>a((0,g.Qu)()),3e3);return}"message"in e&&l(e.data)}catch(e){}})()},[i]);let d=async e=>{a((0,h.GA)(e)),(0,h.Fe)()},o=n.reduce((e,r)=>e+(r.intake_cal||0),0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"sm:mx-auto md:w-full sm:max-w-sm flex justify-between items-center",children:[(0,t.jsx)(X.Z,{date:r,meal_type:s}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{className:"text-xs mr-2",children:[r,"  "]}),(0,t.jsx)("span",{className:"text-sm font-medium mr-2",children:s}),(0,t.jsxs)("span",{className:"text-sm font-semi-bold",children:["(Total: ",Math.round(o)," kcal)"]})]})]}),(0,t.jsx)("div",{className:"lg:mx-auto sm:w-full lg:max-w-sm max-h-[357px] max-md:h-auto overflow-y-auto",children:n.length>0?(0,t.jsxs)("table",{className:"min-w-full divide-y divide-green-200 border border-green-400",children:[(0,t.jsx)("thead",{className:"bg-green-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-green-800",children:"item"}),(0,t.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"amount"}),(0,t.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"kcal"}),(0,t.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"often"}),(0,t.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"delete"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-green-200",children:n.map(e=>(0,t.jsxs)("tr",{className:"whitespace-nowrap",children:[(0,t.jsx)("td",{className:"px-2 py-1 text-xs font-medium text-gray-900 w-32",children:(0,t.jsxs)("button",{className:"w-[120px] hover:border-b",onClick:()=>d(e),children:[(0,t.jsx)("div",{className:"overflow-ellipsis overflow-hidden whitespace-nowrap",children:e.food&&e.food.name}),(0,t.jsx)("div",{className:"overflow-ellipsis overflow-hidden whitespace-nowrap",children:e.fat_secret_food&&e.fat_secret_food.name})]})}),(0,t.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:null!==e.servings?(0,t.jsxs)(t.Fragment,{children:[e.servings,e.food&&" servings",e.fat_secret_food&&" ".concat(e.fat_secret_food.unit)]}):null!==e.grams?"".concat(e.grams," (g)"):"Serving information not available"}),(0,t.jsxs)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:[(0,t.jsx)("strong",{children:Math.round(e.intake_cal)})," kcal"]}),(0,t.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.food?(0,t.jsx)(O.Z,{food:e.food}):(0,t.jsx)(O.Z,{fatsecret_food:e.fat_secret_food})}),(0,t.jsx)("td",{className:"px-2 py-1 text-center text-xs text-red-600",children:(0,t.jsx)(Y.Z,{id:e.id})})]},e.id))})]}):(0,t.jsxs)("p",{className:"text-gray-500",children:["No meals recorded for ",s,"."]})})]})},U=(0,f.$)("6970731a6fa653ebb8b0fe3aa1d9c8b58ec5a081");let W=N.Ry().shape({grams:N.Rx().nullable().transform((e,r)=>""===r?null:r).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:r}=this.parent;return null!==e||null!==r}),servings:N.Rx().nullable().transform((e,r)=>""===r?null:r).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:r}=this.parent;return null!==e||null!==r})});var J=()=>{var e,r,s,a,n,l;(0,c.useRouter)();let i=(0,x.TL)(),d=(0,x.CG)(e=>{var r;return null===(r=e.food_meal)||void 0===r?void 0:r.edit_meal}),[o,m]=(0,u.useState)(!1),[f,b]=(0,u.useState)(!1),p=(0,x.CG)(e=>e.load.custom_food_loading);(0,u.useEffect)(()=>{i((0,h.Xl)())},[p]);let j={grams:null!==(e=null==d?void 0:d.grams)&&void 0!==e?e:null,servings:null!==(r=null==d?void 0:d.servings)&&void 0!==r?r:1};(0,u.useEffect)(()=>{if(d){var e,r;N.setValues({grams:null!==(e=d.grams)&&void 0!==e?e:null,servings:null!==(r=d.servings)&&void 0!==r?r:null}),d.grams&&!d.servings?m(!0):m(!1)}},[d]);let N=(0,y.TA)({initialValues:j,validationSchema:W,onSubmit:async e=>{if(d)try{i((0,_.Tr)(!0)),i((0,_.yP)(!0));let r=await U(e,d.id);if("error"in r){i((0,g.fz)({message:r.error,type:"error"})),setTimeout(()=>i((0,g.Qu)()),3e3);return}"message"in r&&(i((0,g.fz)({message:r.message,type:"success"})),setTimeout(()=>i((0,g.Qu)()),4e3),i((0,h.Xl)()))}catch(e){i((0,g.fz)({message:"An error occurred while updating the meal.",type:"error"})),setTimeout(()=>i((0,g.Qu)()),3e3)}finally{i((0,_.Tr)(!1)),i((0,_.yP)(!1))}else{i((0,g.fz)({message:"You need to choose meal.",type:"error"})),setTimeout(()=>i((0,g.Qu)()),3e3);return}}}),w=[.25,.5,.75,1,1.5,2,3],C=e=>{let r=e.target.value;N.setFieldValue("grams",""===r?null:parseFloat(r)),""!==r&&N.setFieldValue("servings",null)},F=e=>{let r=e.target.value;N.setFieldValue("servings",""===r?null:parseFloat(r)),""!==r&&N.setFieldValue("grams",null)},T=e=>{"custom"===e?b(!f):(N.setFieldValue("servings",e),N.setFieldValue("grams",null),m(!1))};return(0,t.jsx)(t.Fragment,{children:d&&(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[d.food&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,t.jsx)("div",{className:"text-gray-700 font-medium items-start text-base",children:d.food.name}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(d.food.protein)," g F: ",Math.round(d.food.fat)," g C: ",Math.round(d.food.carb)," g (",Math.round(d.food.cal)," kcal) / serving"]})]}),(0,t.jsxs)("form",{onSubmit:N.handleSubmit,className:"space-y-6 mt-4",children:[(0,t.jsxs)("div",{children:[d.food.g_per_serving?(0,t.jsxs)("div",{className:(0,v.Z)(o?"block":"hidden"),children:[(0,t.jsx)("input",{id:"grams",name:"grams",type:"number",onChange:C,onBlur:N.handleBlur,value:null!==(s=N.values.grams)&&void 0!==s?s:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,t.jsx)("span",{className:"text-[15px]",children:" (g)"}),N.touched.grams&&N.errors.grams?(0,t.jsx)("div",{className:"text-red-600 text-sm",children:N.errors.grams}):null]}):null,(0,t.jsxs)("div",{className:(0,v.Z)(o?"hidden":"block"),children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:w.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>T(e),className:(0,v.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",N.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,t.jsxs)("div",{className:"flex mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>T("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{id:"servings",name:"servings",type:"number",onChange:F,onBlur:N.handleBlur,value:null!==(a=N.values.servings)&&void 0!==a?a:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,t.jsx)("span",{className:"text-[15px]",children:" (servings)"})]})]}),N.touched.servings&&N.errors.servings?(0,t.jsx)("div",{className:"text-red-600 text-sm",children:N.errors.servings}):null]})]}),d.food.g_per_serving?(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"button",className:"w-[160px] inline-flex justify-center py-1 px-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>{m(!o),o?(N.setFieldValue("grams",null),N.setFieldValue("servings",null)):(N.setFieldValue("grams",null),N.setFieldValue("servings",1),b(!1))},children:o?"Input by Servings":"Input by Grams"})}):null,(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Meal"})})]})]}),d.fat_secret_food&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,t.jsxs)("div",{className:"text-gray-700 font-medium text-base",children:[d.fat_secret_food.name,d.fat_secret_food.brand_name?(0,t.jsxs)(t.Fragment,{children:[" (",d.fat_secret_food.brand_name,")"]}):(0,t.jsxs)(t.Fragment,{children:[" (",d.fat_secret_food.type,")"]})]}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(d.fat_secret_food.protein)," g F: ",Math.round(d.fat_secret_food.fat)," g C: ",Math.round(d.fat_secret_food.carb)," g (",Math.round(d.fat_secret_food.cal)," kcal) / ",d.fat_secret_food.unit]})]}),(0,t.jsxs)("form",{onSubmit:N.handleSubmit,className:"space-y-6 mt-4",children:[(0,t.jsx)("div",{children:"100g"===d.fat_secret_food.unit?(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{id:"grams",name:"grams",type:"number",onChange:C,onBlur:N.handleBlur,value:null!==(n=N.values.grams)&&void 0!==n?n:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",(0,t.jsx)("span",{className:"text-[15px]",children:" (g)"}),N.touched.grams&&N.errors.grams?(0,t.jsx)("div",{className:"text-red-600 text-sm",children:N.errors.grams}):null]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:w.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>T(e),className:(0,v.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",N.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,t.jsxs)("div",{className:"flex mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>T("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{id:"servings",name:"servings",type:"number",onChange:F,onBlur:N.handleBlur,value:null!==(l=N.values.servings)&&void 0!==l?l:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,t.jsxs)("span",{className:"text-[15px]",children:[" (",d.fat_secret_food.unit,")"]})]})]}),N.touched.servings&&N.errors.servings?(0,t.jsx)("div",{className:"text-red-600 text-sm",children:N.errors.servings}):null]})}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Meal"})})]})]})]})})},K=e=>{let{date:r,meal_type:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4 max-md:mt-3",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Manage Your Meals"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(H,{date:r,meal_type:s}),(0,t.jsx)(J,{})]})]}),(0,t.jsx)("hr",{})]})},ee=s(9796),er=s(1394),es=e=>{let{params:{meal_type:r,date:s}}=e,i=(0,a.W6)(),d=(0,a._Y)(new Date);d.setDate(d.getDate()+2);let o=(0,a.kh)(d,"yyyy-MM-dd"),m=/^\d{4}-\d{2}-\d{2}$/.test(s)&&!isNaN(Date.parse(s))&&s<=o?s:i,u=["Breakfast","Lunch","Dinner","Snack"].includes(r)?r:"Breakfast";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.Z,{date:m}),(0,t.jsx)(l.Z,{date:m}),(0,t.jsx)(n.Z,{date:m}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("div",{className:"flex w-5/6 max-lg:w-full max-lg:flex-col-reverse",children:[(0,t.jsxs)("div",{className:"w-1/2 max-lg:w-full",children:[(0,t.jsx)(k,{}),(0,t.jsx)(B,{date:m,meal_type:u}),(0,t.jsx)($,{date:m,meal_type:u})]}),(0,t.jsxs)("div",{className:"lg:hidden flex ",children:[(0,t.jsx)("div",{className:"w-1/3 max-sm:w-1/2 h-[180px] border",children:(0,t.jsx)(er.Z,{})}),(0,t.jsx)("div",{className:"w-1/3 max-sm:w-1/2 h-[180px] border",children:(0,t.jsx)(er.Z,{})})]}),(0,t.jsx)("div",{className:"w-1/2 max-lg:w-full",children:(0,t.jsx)(K,{date:m,meal_type:u})})]}),(0,t.jsxs)("div",{className:"w-1/6 ml-4 max-lg:hidden ",children:[(0,t.jsx)("div",{className:"h-[200px] w-[200px] border",children:(0,t.jsx)(er.Z,{})}),(0,t.jsx)("div",{className:"h-[200px] w-[200px] border",children:(0,t.jsx)(er.Z,{})}),(0,t.jsx)("div",{className:"h-[200px] w-[200px] border",children:(0,t.jsx)(er.Z,{})})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"w-1/3 h-[180px] max-sm:w-1/2 border",children:(0,t.jsx)(er.Z,{})}),(0,t.jsx)("div",{className:"w-1/3 h-[180px] max-sm:w-1/2 border",children:(0,t.jsx)(er.Z,{})})]})]})}},8322:function(e,r,s){"use strict";s.d(r,{x:function(){return t}}),s(4590);var t=(0,s(8064).$)("be89e7bb6617af0a23ae48cefc188e6cf334430c")},5009:function(e,r,s){"use strict";s.d(r,{r:function(){return g}});var t=s(7437),a=s(2265),n=s(4839),l=s(9381),i=s(6463),d=s(4245),o=s(4297),m=s(8354),u=s(1942);s(4590);var c=(0,s(8064).$)("0da2dde8e1dec082a8d241ac927be311e1678626");let x=d.Ry().shape({name:d.Z_().max(30,"Name must be less than 30 characters").required("Name is required!")});function g(){let e=(0,i.useRouter)(),r=(0,o.TL)(),[s,d]=(0,a.useState)(!1),g=(0,o.CG)(e=>e.license.license),h=(0,l.TA)({initialValues:{name:""},validationSchema:x,onSubmit:async s=>{try{let t=await c(s);"error"in t?(r((0,m.fz)({message:t.error,type:"error"})),setTimeout(()=>r((0,m.Qu)()),4e3)):"message"in t&&(r((0,m.fz)({message:t.message,type:"success"})),setTimeout(()=>r((0,m.Qu)()),3e3),d(!1),e.push("/dashboard/meal-set/".concat(t.data.id)))}catch(e){r((0,m.fz)({message:"An error occurred while creating the meal set.",type:"error"})),setTimeout(()=>r((0,m.Qu)()),3e3)}}});return(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsxs)("button",{className:"flex items-center px-3 py-1 text-xs font-medium text-white bg-gradient-to-r from-emerald-400 to-emerald-600 rounded-md shadow hover:from-green-500 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500",onClick:()=>{if(!g||"free"===g){e.push("/dashboard/premium");return}d(!0)},children:[(0,t.jsx)(u.wEH,{className:"mr-1"}),"Create Meal Set"]}),(0,t.jsx)("span",{className:"absolute top-[-14px] right-0 text-[8px] bg-gradient-to-b from-gray-200 to-gray-400 text-black px-1 py-0.5 rounded-full font-bold",children:"Premium"}),s&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex justify-center items-center",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsxs)("div",{className:"relative z-50 bg-white rounded-lg w-full max-w-lg p-6 mx-4 my-8",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold leading-9 tracking-tight mb-4",children:"Create Meal Set"}),(0,t.jsx)("p",{className:"text-sm mb-2 text-red-600",children:"Note: Please ensure the input data is accurate."}),(0,t.jsxs)("form",{onSubmit:h.handleSubmit,className:"h-[200px] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Name *"}),(0,t.jsxs)("div",{className:"w-2/3",children:[(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:h.values.name,onChange:h.handleChange,onBlur:h.handleBlur,className:(0,n.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":h.touched.name&&h.errors.name}),autoComplete:"off"}),h.errors.name&&h.touched.name&&(0,t.jsx)("p",{className:"text-red-500 text-xs",children:h.errors.name})]})]}),(0,t.jsx)("section",{className:"w-full flex flex-col gap-y-3 justify-start items-end lg:items-center lg:flex-row lg:gap-y-0 lg:justify-between",children:(0,t.jsx)("button",{type:"submit",className:"flex w-[80px] order-1 lg:order-2 lg:w-fit justify-center rounded-md bg-green-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:"Create"})})]}),(0,t.jsx)("button",{className:"absolute top-4 right-4 bg-gray-300 text-gray-700 p-1 rounded-full text-xs",onClick:()=>d(!1),children:"✕"})]})]})]})}},6037:function(e,r,s){"use strict";s.d(r,{Z:function(){return m}});var t=s(7437);s(2265);var a=s(8354),n=s(4297);s(4590);var l=(0,s(8064).$)("6bf7eb2f2329e353b8b07e51af6396a40d5b7b8e"),i=s(4646),d=s(4459),o=s(6356),m=e=>{let{id:r}=e,s=(0,n.TL)(),m=async()=>{try{s((0,i.Tr)(!0));let e=await l(r);if("error"in e){s((0,a.fz)({message:e.error,type:"error"})),setTimeout(()=>s((0,a.Qu)()),3e3);return}if("detail"in e){s((0,a.fz)({message:e.detail,type:"error"})),setTimeout(()=>s((0,a.Qu)()),3e3);return}"message"in e&&(s((0,a.fz)({message:e.message,type:"success"})),setTimeout(()=>s((0,a.Qu)()),3e3),s((0,d.Xl)()))}catch(e){s((0,a.fz)({message:"An error occurred while deleting the meal.",type:"error"})),setTimeout(()=>s((0,a.Qu)()),3e3)}finally{s((0,i.Tr)(!1))}};return(0,t.jsx)("div",{className:"flex items-center gap-x-2 p-2 ",children:(0,t.jsx)("button",{className:"hover:text-red-800 transition",onClick:m,children:(0,t.jsx)(o.I0,{size:15})})})}},2837:function(e,r,s){"use strict";s.d(r,{Z:function(){return x}});var t=s(7437),a=s(2265),n=s(6463),l=s(4297),i=s(8354),d=s(4646);s(4590);var o=s(8064),m=(0,o.$)("8a42b8b540243bc7fd7247cb2280a07c257963ae"),u=(0,o.$)("28a819062975c26b1cb5f64dd90355706540512b"),c=s(6356),x=e=>{let{date:r,meal_type:s}=e,o=(0,n.useRouter)(),x=(0,l.TL)(),[g,h]=(0,a.useState)([]),[f,b]=(0,a.useState)(!1),p=(0,l.CG)(e=>e.license.license);(0,a.useEffect)(()=>{(async()=>{if(p&&"free"!==p)try{let e=await u(s);if("error"in e){x((0,i.fz)({message:e.error,type:"error"})),setTimeout(()=>x((0,i.Qu)()),3e3);return}"message"in e&&h(e.data)}catch(e){}})()},[s,x,p]);let v=async()=>{if(!p||"free"===p){o.push("/dashboard/premium");return}try{x((0,d.Tr)(!0));let e=await m({date:r,meal_type:s});if("error"in e){x((0,i.fz)({message:e.error,type:"error"})),setTimeout(()=>x((0,i.Qu)()),3e3);return}"message"in e&&(x((0,i.fz)({message:e.message,type:"success"})),setTimeout(()=>x((0,i.Qu)()),4e3))}catch(e){x((0,i.fz)({message:"An error occurred while registering the meal.",type:"error"})),setTimeout(()=>x((0,i.Qu)()),3e3)}finally{x((0,d.Tr)(!1))}};return(0,t.jsxs)("div",{className:"relative",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[(0,t.jsx)("button",{className:" flex items-center justify-center p-1 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition",onClick:v,children:(0,t.jsx)(c.BMe,{size:20})}),f&&(0,t.jsx)("div",{className:"absolute z-10 p-2 bg-white border-2 border-blue-500 rounded shadow-lg w-64 ml-2 mt-2",children:(0,t.jsxs)("div",{className:"border-2 border-blue-500 p-2 rounded-md bg-blue-50",children:[(0,t.jsx)("ul",{children:g.map((e,r)=>{var s;return(0,t.jsx)("li",{className:"text-xs text-gray-700 truncate",children:e.food?e.food.name:null===(s=e.fat_secret_food)||void 0===s?void 0:s.name},r)})}),!p||"free"===p&&(0,t.jsxs)("div",{className:"font-bold ",children:["This is for ",(0,t.jsx)("span",{className:"rounded-lg py-0.5 px-1 bg-gradient-to-r from-gray-200 to-gray-400 text-black",children:"Premium"})]})]})})]})}}},function(e){e.O(0,[7699,6051,9461,7123,4349,8048,5470,282,2971,7023,1744],function(){return e(e.s=3661)}),_N_E=e.O()}]);