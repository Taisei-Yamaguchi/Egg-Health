(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9628],{6549:function(e,t,r){Promise.resolve().then(r.bind(r,5073))},6463:function(e,t,r){"use strict";var s=r(1169);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},8064:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return n}});let s=r(4590);function n(e){let{createServerReference:t}=r(6671);return t(e,s.callServer)}},5073:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var s=r(7437);r(4590);var n=r(8064),a=(0,n.$)("53463fae2feae9000907cc85f55abbf69a1b9111"),l=r(4297),i=r(2265),o=r(8354),d=r(2329),u=r(2360),c=r(4920),m=r(5622),x=()=>(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("h2",{className:"text-base font-semibold",children:"Step 1: Search for Food"})}),(0,s.jsx)(d.Z,{}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"mr-1",children:(0,s.jsx)(u.Z,{})}),(0,s.jsx)("div",{className:"mr-1",children:(0,s.jsx)(c.Z,{})}),(0,s.jsx)("div",{className:"mr-1",children:(0,s.jsx)(m.Z,{})})]})]}),g=r(3438),f=()=>(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("h2",{className:"text-base font-semibold",children:"Step 2: Select Foods for Your Meal"})}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(g.Z,{})})]}),h=r(6463),p=r(4839),v=r(9381),b=r(4245),y=r(4646),j=r(4459),w=(0,n.$)("94452ce824ab2a23cabad63757d9870337c1eff3");let _=b.Ry().shape({grams:b.Rx().nullable().transform((e,t)=>""===t?null:t).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:t}=this.parent;return null!==e||null!==t}),servings:b.Rx().nullable().transform((e,t)=>""===t?null:t).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:t}=this.parent;return null!==e||null!==t})}),N={grams:null,servings:1};var F=e=>{var t,r;let{meal_set_id:n}=e;(0,h.useRouter)();let a=(0,l.TL)(),d=(0,l.CG)(e=>{var t;return null===(t=e.food_meal)||void 0===t?void 0:t.used_food}),[u,c]=(0,i.useState)(!1),[m,x]=(0,i.useState)(!1),g=(0,l.CG)(e=>e.load.custom_food_loading);(0,i.useEffect)(()=>{a((0,j.Fe)())},[g]);let f=(0,v.TA)({initialValues:N,validationSchema:_,onSubmit:async e=>{if(d)try{a((0,y.Tr)(!0));let t=await w({...e,food:d.id,meal_set:n});"error"in t?(a((0,o.fz)({message:t.error,type:"error"})),setTimeout(()=>a((0,o.Qu)()),3e3)):"message"in t&&(a((0,o.fz)({message:t.message,type:"success"})),setTimeout(()=>a((0,o.Qu)()),4e3),a((0,j.Fe)()))}catch(e){a((0,o.fz)({message:"An error occurred while registering the meal.",type:"error"})),setTimeout(()=>a((0,o.Qu)()),3e3)}finally{a((0,y.Tr)(!1))}else{a((0,o.fz)({message:"You need to choose food.",type:"error"})),setTimeout(()=>a((0,o.Qu)()),3e3);return}}}),b=e=>{"custom"===e?x(!m):(f.setFieldValue("servings",e),f.setFieldValue("grams",null),c(!1))};return(0,s.jsx)(s.Fragment,{children:d&&(0,s.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,s.jsx)("div",{className:"text-gray-700 font-medium items-start text-base",children:d.name}),(0,s.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(d.protein)," g F: ",Math.round(d.fat)," g C: ",Math.round(d.carb)," g (",Math.round(d.cal)," kcal) / serving"]})]}),(0,s.jsxs)("form",{onSubmit:f.handleSubmit,className:"space-y-6 mt-4",children:[(0,s.jsxs)("div",{children:[d.g_per_serving?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:(0,p.Z)(u?"block":"hidden"),children:[(0,s.jsx)("input",{id:"grams",name:"grams",type:"number",onChange:e=>{let t=e.target.value;f.setFieldValue("grams",""===t?null:parseFloat(t)),""!==t&&f.setFieldValue("servings",null)},onBlur:f.handleBlur,value:null!==(t=f.values.grams)&&void 0!==t?t:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,s.jsx)("span",{className:"text-[15px]",children:" (g)"})]}),f.touched.grams&&f.errors.grams?(0,s.jsx)("div",{className:"text-red-600 text-sm",children:f.errors.grams}):null]}):null,(0,s.jsxs)("div",{className:(0,p.Z)(u?"hidden":"block"),children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:[.25,.5,.75,1,1.5,2,3].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>b(e),className:(0,p.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",f.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,s.jsxs)("div",{className:"flex mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>b("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{id:"servings",name:"servings",type:"number",onChange:e=>{let t=e.target.value;f.setFieldValue("servings",""===t?null:parseFloat(t)),""!==t&&f.setFieldValue("grams",null)},onBlur:f.handleBlur,value:null!==(r=f.values.servings)&&void 0!==r?r:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,s.jsx)("span",{className:"text-[15px]",children:" (servings)"})]})]}),f.touched.servings&&f.errors.servings?(0,s.jsx)("div",{className:"text-red-600 text-sm",children:f.errors.servings}):null]})]}),d.g_per_serving?(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"button",className:"w-[160px] inline-flex justify-center py-1 px-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>{c(!u),u?(f.setFieldValue("grams",null),f.setFieldValue("servings",null)):(f.setFieldValue("grams",null),f.setFieldValue("servings",1),x(!1))},children:u?"Input by Servings":"Input by Grams"})}):null,(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Register Meal"})})]})]})})};let S=b.Ry().shape({grams:b.Rx().nullable().transform((e,t)=>""===t?null:t).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:t}=this.parent;return null!==e||null!==t}),servings:b.Rx().nullable().transform((e,t)=>""===t?null:t).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:t}=this.parent;return null!==e||null!==t})}),k={grams:null,servings:null};var T=e=>{var t,r;let{meal_set_id:n}=e;(0,h.useRouter)();let a=(0,l.TL)(),d=(0,l.CG)(e=>{var t;return null===(t=e.food_meal)||void 0===t?void 0:t.used_fatsecret_food}),[u,c]=(0,i.useState)(!1),m=(0,v.TA)({initialValues:k,validationSchema:S,onSubmit:async e=>{if(d)try{a((0,y.Tr)(!0));let t=await w({...e,fat_secret_food:d.id,meal_set:n});"error"in t?(a((0,o.fz)({message:t.error,type:"error"})),setTimeout(()=>a((0,o.Qu)()),3e3)):"message"in t&&(a((0,o.fz)({message:t.message,type:"success"})),setTimeout(()=>a((0,o.Qu)()),4e3),a((0,j.zo)()))}catch(e){a((0,o.fz)({message:"An error occurred while registering the meal.",type:"error"})),setTimeout(()=>a((0,o.Qu)()),3e3)}finally{a((0,y.Tr)(!1))}else{a((0,o.fz)({message:"You need to choose food.",type:"error"})),setTimeout(()=>a((0,o.Qu)()),3e3);return}}}),x=e=>{"custom"===e?c(!u):(m.setFieldValue("servings",e),m.setFieldValue("grams",null),c(!1))};return(0,s.jsx)(s.Fragment,{children:d&&(0,s.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,s.jsxs)("div",{className:"text-gray-700 font-medium items-start text-base",children:[d.name,d.brand_name?(0,s.jsxs)(s.Fragment,{children:[" (",d.brand_name,")"]}):(0,s.jsxs)(s.Fragment,{children:[" (",d.type,")"]})]}),(0,s.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(d.protein)," g F: ",Math.round(d.fat)," g C: ",Math.round(d.carb)," g (",Math.round(d.cal)," kcal) / ",d.unit]})]}),(0,s.jsxs)("form",{onSubmit:m.handleSubmit,className:"space-y-6 mt-4",children:[(0,s.jsx)("div",{children:"100g"===d.unit?(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{id:"grams",name:"grams",type:"number",onChange:e=>{let t=e.target.value;m.setFieldValue("grams",""===t?null:parseFloat(t)),""!==t&&m.setFieldValue("servings",null)},onBlur:m.handleBlur,value:null!==(t=m.values.grams)&&void 0!==t?t:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",(0,s.jsx)("span",{className:"text-[15px]",children:" (g)"}),m.touched.grams&&m.errors.grams?(0,s.jsx)("div",{className:"text-red-600 text-sm",children:m.errors.grams}):null]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2 ",children:[.25,.5,.75,1,1.5,2,3].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>x(e),className:(0,p.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",m.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,s.jsxs)("div",{className:"flex mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>x("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{id:"servings",name:"servings",type:"number",onChange:e=>{let t=e.target.value;m.setFieldValue("servings",""===t?null:parseFloat(t)),""!==t&&m.setFieldValue("grams",null)},onBlur:m.handleBlur,value:null!==(r=m.values.servings)&&void 0!==r?r:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",(0,s.jsxs)("span",{className:"text-[15px]",children:[" (",d.unit,")"]})]})]}),m.touched.servings&&m.errors.servings?(0,s.jsx)("div",{className:"text-red-600 text-sm",children:m.errors.servings}):null]})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Register Meal"})})]})]})})},P=e=>{let{id:t}=e;return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("h2",{className:"text-base font-semibold",children:"Step 3: Register Your Meal"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(F,{meal_set_id:t}),(0,s.jsx)(T,{meal_set_id:t})]})]})},C=r(4763),E=(0,n.$)("086192e980ee892254c322741e753833f727b051"),M=r(6356),O=e=>{let{id:t}=e,r=(0,l.TL)(),n=async()=>{try{r((0,y.Tr)(!0));let e=await E(t);if("error"in e){r((0,o.fz)({message:e.error,type:"error"})),setTimeout(()=>r((0,o.Qu)()),3e3);return}if("detail"in e){r((0,o.fz)({message:e.detail,type:"error"})),setTimeout(()=>r((0,o.Qu)()),3e3);return}"message"in e&&(r((0,o.fz)({message:e.message,type:"success"})),setTimeout(()=>r((0,o.Qu)()),3e3),r((0,j.Jo)()))}catch(e){r((0,o.fz)({message:"An error occurred while deleting the meal.",type:"error"})),setTimeout(()=>r((0,o.Qu)()),3e3)}finally{r((0,y.Tr)(!1))}};return(0,s.jsx)("div",{className:"flex items-center gap-x-2 p-2 ",children:(0,s.jsx)("button",{className:"hover:text-red-800 transition",onClick:n,children:(0,s.jsx)(M.I0,{size:15})})})},Z=e=>{let{meal_pres:t}=e;(0,h.useRouter)();let r=(0,l.TL)(),n=async e=>{r((0,j.Go)(e)),(0,j.Fe)()},a=t.reduce((e,t)=>e+(t.intake_cal||0),0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm ",children:(0,s.jsxs)("span",{className:"text-sm font-semi-bold",children:["Total: ",Math.round(a)," kcal"]})}),(0,s.jsx)("div",{className:"lg:mx-auto sm:w-full lg:max-w-sm max-h-[357px] overflow-y-auto",children:t.length>0?(0,s.jsxs)("table",{className:"min-w-full divide-y divide-green-200 border border-green-400",children:[(0,s.jsx)("thead",{className:"bg-green-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-green-800",children:"item"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"amount"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"kcal"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"often"}),(0,s.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"delete"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-green-200",children:t.map(e=>(0,s.jsxs)("tr",{className:"whitespace-nowrap",children:[(0,s.jsx)("td",{className:"px-2 py-1 text-xs font-medium text-gray-900 w-32",children:(0,s.jsxs)("button",{className:"w-[120px] hover:border-b",onClick:()=>n(e),children:[(0,s.jsx)("div",{className:"overflow-ellipsis overflow-hidden whitespace-nowrap",children:e.food&&e.food.name}),(0,s.jsx)("div",{className:"overflow-ellipsis overflow-hidden whitespace-nowrap",children:e.fat_secret_food&&e.fat_secret_food.name})]})}),(0,s.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:null!==e.servings?(0,s.jsxs)(s.Fragment,{children:[e.servings,e.food&&" servings",e.fat_secret_food&&" ".concat(e.fat_secret_food.unit)]}):null!==e.grams?"".concat(e.grams," (g)"):"Serving information not available"}),(0,s.jsxs)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:[(0,s.jsx)("strong",{children:Math.round(e.intake_cal)})," kcal"]}),(0,s.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.food?(0,s.jsx)(C.Z,{food:e.food}):(0,s.jsx)(C.Z,{fatsecret_food:e.fat_secret_food})}),(0,s.jsx)("td",{className:"px-2 py-1 text-center text-xs text-red-600",children:(0,s.jsx)(O,{id:e.id})})]},e.id))})]}):(0,s.jsx)("p",{className:"text-gray-500",children:"No meals recorded for this meal set."})})]})},V=(0,n.$)("25616c24a7e1c6ffc775732e5a69994440f52415");let L=b.Ry().shape({grams:b.Rx().nullable().transform((e,t)=>""===t?null:t).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:t}=this.parent;return null!==e||null!==t}),servings:b.Rx().nullable().transform((e,t)=>""===t?null:t).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:t}=this.parent;return null!==e||null!==t})});var z=()=>{var e,t,r,n,a,d;(0,h.useRouter)();let u=(0,l.TL)(),c=(0,l.CG)(e=>{var t;return null===(t=e.food_meal)||void 0===t?void 0:t.edit_meal_pre}),[m,x]=(0,i.useState)(!1),[g,f]=(0,i.useState)(!1),b=(0,l.CG)(e=>e.load.custom_food_loading);(0,i.useEffect)(()=>{u((0,j.Jo)())},[b]);let w={grams:null!==(e=null==c?void 0:c.grams)&&void 0!==e?e:null,servings:null!==(t=null==c?void 0:c.servings)&&void 0!==t?t:1};(0,i.useEffect)(()=>{if(c){var e,t;_.setValues({grams:null!==(e=c.grams)&&void 0!==e?e:null,servings:null!==(t=c.servings)&&void 0!==t?t:null}),c.grams&&!c.servings?x(!0):x(!1)}},[c]);let _=(0,v.TA)({initialValues:w,validationSchema:L,onSubmit:async e=>{if(c)try{u((0,y.Tr)(!0)),u((0,y.yP)(!0));let t=await V(e,c.id);if("error"in t){u((0,o.fz)({message:t.error,type:"error"})),setTimeout(()=>u((0,o.Qu)()),3e3);return}"message"in t&&(u((0,o.fz)({message:t.message,type:"success"})),setTimeout(()=>u((0,o.Qu)()),4e3),u((0,j.Jo)()))}catch(e){u((0,o.fz)({message:"An error occurred while updating the meal.",type:"error"})),setTimeout(()=>u((0,o.Qu)()),3e3)}finally{u((0,y.Tr)(!1)),u((0,y.yP)(!1))}else{u((0,o.fz)({message:"You need to choose meal.",type:"error"})),setTimeout(()=>u((0,o.Qu)()),3e3);return}}}),N=[.25,.5,.75,1,1.5,2,3],F=e=>{let t=e.target.value;_.setFieldValue("grams",""===t?null:parseFloat(t)),""!==t&&_.setFieldValue("servings",null)},S=e=>{let t=e.target.value;_.setFieldValue("servings",""===t?null:parseFloat(t)),""!==t&&_.setFieldValue("grams",null)},k=e=>{"custom"===e?f(!g):(_.setFieldValue("servings",e),_.setFieldValue("grams",null),x(!1))};return(0,s.jsx)(s.Fragment,{children:c&&(0,s.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[c.food&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,s.jsx)("div",{className:"text-gray-700 font-medium items-start text-base",children:c.food.name}),(0,s.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(c.food.protein)," g F: ",Math.round(c.food.fat)," g C: ",Math.round(c.food.carb)," g (",Math.round(c.food.cal)," kcal) / serving"]})]}),(0,s.jsxs)("form",{onSubmit:_.handleSubmit,className:"space-y-6 mt-4",children:[(0,s.jsxs)("div",{children:[c.food.g_per_serving?(0,s.jsxs)("div",{className:(0,p.Z)(m?"block":"hidden"),children:[(0,s.jsx)("input",{id:"grams",name:"grams",type:"number",onChange:F,onBlur:_.handleBlur,value:null!==(r=_.values.grams)&&void 0!==r?r:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,s.jsx)("span",{className:"text-[15px]",children:" (g)"}),_.touched.grams&&_.errors.grams?(0,s.jsx)("div",{className:"text-red-600 text-sm",children:_.errors.grams}):null]}):null,(0,s.jsxs)("div",{className:(0,p.Z)(m?"hidden":"block"),children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:N.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>k(e),className:(0,p.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",_.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,s.jsxs)("div",{className:"flex mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>k("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{id:"servings",name:"servings",type:"number",onChange:S,onBlur:_.handleBlur,value:null!==(n=_.values.servings)&&void 0!==n?n:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,s.jsx)("span",{className:"text-[15px]",children:" (servings)"})]})]}),_.touched.servings&&_.errors.servings?(0,s.jsx)("div",{className:"text-red-600 text-sm",children:_.errors.servings}):null]})]}),c.food.g_per_serving?(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"button",className:"w-[160px] inline-flex justify-center py-1 px-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>{x(!m),m?(_.setFieldValue("grams",null),_.setFieldValue("servings",null)):(_.setFieldValue("grams",null),_.setFieldValue("servings",1),f(!1))},children:m?"Input by Servings":"Input by Grams"})}):null,(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Meal"})})]})]}),c.fat_secret_food&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,s.jsxs)("div",{className:"text-gray-700 font-medium text-base",children:[c.fat_secret_food.name,c.fat_secret_food.brand_name?(0,s.jsxs)(s.Fragment,{children:[" (",c.fat_secret_food.brand_name,")"]}):(0,s.jsxs)(s.Fragment,{children:[" (",c.fat_secret_food.type,")"]})]}),(0,s.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(c.fat_secret_food.protein)," g F: ",Math.round(c.fat_secret_food.fat)," g C: ",Math.round(c.fat_secret_food.carb)," g (",Math.round(c.fat_secret_food.cal)," kcal) / ",c.fat_secret_food.unit]})]}),(0,s.jsxs)("form",{onSubmit:_.handleSubmit,className:"space-y-6 mt-4",children:[(0,s.jsx)("div",{children:"100g"===c.fat_secret_food.unit?(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{id:"grams",name:"grams",type:"number",onChange:F,onBlur:_.handleBlur,value:null!==(a=_.values.grams)&&void 0!==a?a:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",(0,s.jsx)("span",{className:"text-[15px]",children:" (g)"}),_.touched.grams&&_.errors.grams?(0,s.jsx)("div",{className:"text-red-600 text-sm",children:_.errors.grams}):null]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:N.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>k(e),className:(0,p.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",_.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,s.jsxs)("div",{className:"flex mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>k("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{id:"servings",name:"servings",type:"number",onChange:S,onBlur:_.handleBlur,value:null!==(d=_.values.servings)&&void 0!==d?d:"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,s.jsxs)("span",{className:"text-[15px]",children:[" (",c.fat_secret_food.unit,")"]})]})]}),_.touched.servings&&_.errors.servings?(0,s.jsx)("div",{className:"text-red-600 text-sm",children:_.errors.servings}):null]})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Meal"})})]})]})]})})},R=(0,n.$)("22e275f58d2e662914ba5840b3bd325118189f7c");let Q=b.Ry().shape({name:b.Z_().max(30,"Name must be less than 30 characters").required("Name is required!")});var B=e=>{let{id:t,name:r}=e;(0,h.useRouter)();let n=(0,l.TL)(),a=(0,v.TA)({initialValues:{name:r},validationSchema:Q,onSubmit:async e=>{try{let r=await R(t,e);"error"in r?(n((0,o.fz)({message:r.error,type:"success"})),setTimeout(()=>n((0,o.Qu)()),4e3)):"message"in r&&(n((0,o.fz)({message:r.message,type:"success"})),setTimeout(()=>n((0,o.Qu)()),3e3))}catch(e){n((0,o.fz)({message:"An error occurred while creating the meal set.",type:"error"})),setTimeout(()=>n((0,o.Qu)()),3e3)}finally{}}});return(0,s.jsx)("div",{children:(0,s.jsxs)("form",{onSubmit:a.handleSubmit,className:"",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:a.values.name,onChange:a.handleChange,onBlur:a.handleBlur,className:(0,p.Z)("text-xl font-bold block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600  sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":a.touched.name&&a.errors.name}),autoComplete:"off"}),a.errors.name&&a.touched.name&&(0,s.jsx)("p",{className:"text-red-500 text-xs",children:a.errors.name})]})}),(0,s.jsx)("section",{className:"w-full flex flex-col gap-y-3 justify-start items-end lg:items-center lg:flex-row lg:gap-y-0 lg:justify-between",children:(0,s.jsx)("button",{type:"submit",className:"flex w-[80px] order-1 lg:order-2 lg:w-fit justify-center rounded-md bg-green-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:"Save"})})]})})},A=e=>{let{mealSet:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4 max-md:mt-3",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(B,{id:t.meal_set_id,name:null==t?void 0:t.meal_set_name})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(Z,{meal_pres:t.meal_pres}),(0,s.jsx)(z,{})]})]}),(0,s.jsx)("hr",{})]})},G=r(1394),I=e=>{let{params:{id:t}}=e,r=(0,l.TL)(),n=(0,l.CG)(e=>e.load.meal_loading),[d,u]=(0,i.useState)(null);return(0,i.useEffect)(()=>{a(t).then(e=>{if("error"in e){r((0,o.fz)({message:e.error,type:"error"})),setTimeout(()=>r((0,o.Qu)()),3e3);return}"message"in e&&u(e.data)}).catch(e=>{console.error("Error fetching meals:",e)})},[n,r,t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Meal Set"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:"flex w-5/6 max-lg:w-full max-lg:flex-col-reverse",children:[(0,s.jsxs)("div",{className:"w-1/2 max-lg:w-full",children:[(0,s.jsx)(x,{}),(0,s.jsx)(f,{}),(0,s.jsx)(P,{id:t})]}),(0,s.jsxs)("div",{className:"lg:hidden flex ",children:[(0,s.jsx)("div",{className:"w-1/3 max-sm:w-1/2 h-[180px] border",children:(0,s.jsx)(G.Z,{})}),(0,s.jsx)("div",{className:"w-1/3 max-sm:w-1/2 h-[180px] border",children:(0,s.jsx)(G.Z,{})})]}),(0,s.jsx)("div",{className:"w-1/2 max-lg:w-full",children:d&&(0,s.jsx)(A,{mealSet:d})})]}),(0,s.jsxs)("div",{className:"w-1/6 ml-4 max-lg:hidden ",children:[(0,s.jsx)("div",{className:"h-[200px] w-[200px] border",children:(0,s.jsx)(G.Z,{})}),(0,s.jsx)("div",{className:"h-[200px] w-[200px] border",children:(0,s.jsx)(G.Z,{})}),(0,s.jsx)("div",{className:"h-[200px] w-[200px] border",children:(0,s.jsx)(G.Z,{})})]})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"w-1/3 h-[180px] max-sm:w-1/2 border",children:(0,s.jsx)(G.Z,{})}),(0,s.jsx)("div",{className:"w-1/3 h-[180px] max-sm:w-1/2 border",children:(0,s.jsx)(G.Z,{})})]})]})}},1394:function(e,t,r){"use strict";var s=r(7437);t.Z=()=>(0,s.jsx)("div",{className:"w-full h-full bg-red-50 flex items-center justify-center border",children:(0,s.jsx)("p",{children:"Advertisements"})})},2808:function(e,t,r){"use strict";var s=r(7437),n=r(1444),a=r(4297);t.default=e=>{let{children:t}=e;return(0,s.jsx)(n.zt,{store:a.w_,children:t})}},4297:function(e,t,r){"use strict";r.d(t,{w_:function(){return h},TL:function(){return p},CG:function(){return v}});var s=r(1444),n=r(9753),a=r(8440),l=r(8354),i=r(4459),o=r(4646),d=r(5585);let u=(0,n.oM)({name:"food_meal",initialState:{date:null},reducers:{setDate:(e,t)=>{e.date=t.payload},resetDate:e=>{e.date=null}}}),{setDate:c,resetDate:m}=u.actions;var x=u.reducer,g=r(2072),f=r(2035);r(2808);let h=(0,n.xC)({reducer:{toast:l.ZP,auth:a.ZP,food_meal:i.ZP,load:o.ZP,workout_exercise:d.ZP,date:x,latest_weight:g.ZP,license:f.ZP}}),p=s.I0,v=s.v9},8440:function(e,t,r){"use strict";r.d(t,{Li:function(){return a},QV:function(){return n}});let s=(0,r(9753).oM)({name:"auth",initialState:{account:null},reducers:{setAuth:(e,t)=>{e.account={id:t.payload.id,nickname:t.payload.nickname,username:t.payload.username}},resetAuth:e=>{e.account=null}}}),{setAuth:n,resetAuth:a}=s.actions;t.ZP=s.reducer},5585:function(e,t,r){"use strict";r.d(t,{AW:function(){return u},Gt:function(){return a},H3:function(){return x},N8:function(){return n},QK:function(){return c},c0:function(){return o},mE:function(){return i},nY:function(){return l},nw:function(){return m},zO:function(){return d}});let s=(0,r(9753).oM)({name:"workout_exercise",initialState:{used_workout:null,edit_exercise:null,select_workout_list:null,exercise_set_list:null,edit_exercise_pre:null},reducers:{setUsedWorkout:(e,t)=>{e.used_workout=t.payload},resetUsedWorkout:e=>{e.used_workout=null},setEditExercise:(e,t)=>{e.edit_exercise=t.payload},resetEditExercise:e=>{e.edit_exercise=null},setSelectWorkoutList:(e,t)=>{e.select_workout_list=t.payload},resetSelectWorkoutList:e=>{e.select_workout_list=null},setExerciseSetList:(e,t)=>{e.exercise_set_list=t.payload},resetExerciseSetList:e=>{e.exercise_set_list=null},setEditExercisePre:(e,t)=>{e.edit_exercise_pre=t.payload},resetEditExercisePre:e=>{e.edit_exercise_pre=null}}}),{setUsedWorkout:n,resetUsedWorkout:a,setEditExercise:l,resetEditExercise:i,setSelectWorkoutList:o,resetSelectWorkoutList:d,setExerciseSetList:u,resetExerciseSetList:c,setEditExercisePre:m,resetEditExercisePre:x}=s.actions;t.ZP=s.reducer},2072:function(e,t,r){"use strict";r.d(t,{HW:function(){return n}});let s=(0,r(9753).oM)({name:"latest_weight",initialState:{latest_weight:null},reducers:{setLatestWeight:(e,t)=>{e.latest_weight=t.payload},resetLatestweight:e=>{e.latest_weight=null}}}),{setLatestWeight:n,resetLatestweight:a}=s.actions;t.ZP=s.reducer},2035:function(e,t,r){"use strict";r.d(t,{BE:function(){return n}});let s=(0,r(9753).oM)({name:"license",initialState:{license:null},reducers:{setLicense:(e,t)=>{e.license=t.payload},resetLicense:e=>{e.license=null}}}),{setLicense:n,resetLicense:a}=s.actions;t.ZP=s.reducer},4646:function(e,t,r){"use strict";r.d(t,{Dv:function(){return x},OV:function(){return d},RO:function(){return m},Tr:function(){return n},ex:function(){return o},lc:function(){return u},ly:function(){return i},mH:function(){return c},wO:function(){return a},yP:function(){return l}});let s=(0,r(9753).oM)({name:"loading",initialState:{meal_loading:!1,often_food_loading:!1,history_food_loading:!1,custom_food_loading:!1,exercise_loading:!1,history_workout_loading:!1,custom_workout_loading:!1,often_workout_loading:!1,monster_loading:!1,set_loading:!1},reducers:{setMealLoading:(e,t)=>{e.meal_loading=t.payload},setOftenFoodLoading:(e,t)=>{e.often_food_loading=t.payload},setHistoryFoodLoading:(e,t)=>{e.history_food_loading=t.payload},setCustomFoodLoading:(e,t)=>{e.custom_food_loading=t.payload},setExerciseLoading:(e,t)=>{e.exercise_loading=t.payload},setHistoryWorkoutLoading:(e,t)=>{e.history_workout_loading=t.payload},setCustomWorkoutLoading:(e,t)=>{e.custom_workout_loading=t.payload},setOftenWorkoutLoading:(e,t)=>{e.often_workout_loading=t.payload},setMonsterLoading:(e,t)=>{e.monster_loading=t.payload},setSetLoading:(e,t)=>{e.set_loading=t.payload}}}),{setMealLoading:n,setOftenFoodLoading:a,setHistoryFoodLoading:l,setCustomFoodLoading:i,setExerciseLoading:o,setCustomWorkoutLoading:d,setHistoryWorkoutLoading:u,setOftenWorkoutLoading:c,setMonsterLoading:m,setSetLoading:x}=s.actions;t.ZP=s.reducer},4459:function(e,t,r){"use strict";r.d(t,{Fe:function(){return a},GA:function(){return l},Go:function(){return g},Jo:function(){return f},RR:function(){return u},Td:function(){return m},Xl:function(){return i},bI:function(){return x},km:function(){return o},wc:function(){return c},x9:function(){return n},zo:function(){return d}});let s=(0,r(9753).oM)({name:"food_meal",initialState:{used_food:null,edit_meal:null,used_fatsecret_food:null,select_food_list:null,meal_set_list:null,edit_meal_pre:null},reducers:{setUsedFood:(e,t)=>{e.used_food=t.payload},resetUsedFood:e=>{e.used_food=null},setEditMeal:(e,t)=>{e.edit_meal=t.payload},resetEditMeal:e=>{e.edit_meal=null},setUsedFatSecretFood:(e,t)=>{e.used_fatsecret_food=t.payload},resetUsedFatSecretFood:e=>{e.used_fatsecret_food=null},setSelectFoodList:(e,t)=>{e.select_food_list=t.payload},resetSelectFoodList:e=>{e.select_food_list=null},setMealSetList:(e,t)=>{e.meal_set_list=t.payload},resetMealSetList:e=>{e.meal_set_list=null},setEditMealPre:(e,t)=>{e.edit_meal_pre=t.payload},resetEditMealPre:e=>{e.edit_meal_pre=null}}}),{setUsedFood:n,resetUsedFood:a,setEditMeal:l,resetEditMeal:i,setUsedFatSecretFood:o,resetUsedFatSecretFood:d,setSelectFoodList:u,resetSelectFoodList:c,setMealSetList:m,resetMealSetList:x,setEditMealPre:g,resetEditMealPre:f}=s.actions;t.ZP=s.reducer},8354:function(e,t,r){"use strict";r.d(t,{Qu:function(){return i},fz:function(){return l}});var s=r(9753);let n={message:"",type:"info"},a=(0,s.oM)({name:"toast",initialState:n,reducers:{setToast:(e,t)=>{e.message=t.payload.message,e.type=t.payload.type},resetToast:e=>{e.message=n.message,e.type=n.type}}}),{setToast:l,resetToast:i}=a.actions;t.ZP=a.reducer},4839:function(e,t,r){"use strict";t.Z=function(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(s=e(t[r]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(s&&(s+=" "),s+=t);return s}},1810:function(e,t,r){"use strict";r.d(t,{w_:function(){return u}});var s=r(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=s.createContext&&s.createContext(n),l=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var s,n;s=t,n=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in e?Object.defineProperty(e,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>s.createElement(c,i({attr:d({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,d({key:r},t.attr),e(t.child)))}(e.child))}function c(e){var t=t=>{var r,{attr:n,size:a,title:o}=e,u=function(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,l),c=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,u,{className:r,style:d(d({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==a?s.createElement(a.Consumer,null,e=>t(e)):t(n)}}},function(e){e.O(0,[6051,9461,7123,4349,282,2971,7023,1744],function(){return e(e.s=6549)}),_N_E=e.O()}]);