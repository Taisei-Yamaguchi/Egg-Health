(()=>{var e={};e.id=5458,e.ids=[5458],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},6437:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(72199),s(96162),s(12975),s(7629),s(12523);var t=s(23191),a=s(88716),n=s(37922),i=s.n(n),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(r,d);let o=["",{children:["dashboard",{children:["meal",{children:["[meal_type]",{children:["[date]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,72199)),"/Users/taisei_yamaguchi/Desktop/Egg-Health/frontend/src/app/dashboard/meal/[meal_type]/[date]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,96162)),"/Users/taisei_yamaguchi/Desktop/Egg-Health/frontend/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,50592))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,12975)),"/Users/taisei_yamaguchi/Desktop/Egg-Health/frontend/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"/Users/taisei_yamaguchi/Desktop/Egg-Health/frontend/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,12523)),"/Users/taisei_yamaguchi/Desktop/Egg-Health/frontend/src/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,50592))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/taisei_yamaguchi/Desktop/Egg-Health/frontend/src/app/dashboard/meal/[meal_type]/[date]/page.tsx"],m="/dashboard/meal/[meal_type]/[date]/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/meal/[meal_type]/[date]/page",pathname:"/dashboard/meal/[meal_type]/[date]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},12125:(e,r,s)=>{let t={"19cb0e72dbbcbcf49c393ba7e48690d825ebad7c":()=>Promise.resolve().then(s.bind(s,84291)).then(e=>e.searchFatsecretFoods),da73c8e80e35425672d08afa96053fc232e748c8:()=>Promise.resolve().then(s.bind(s,84291)).then(e=>e.$$ACTION_0),"17ee4cb4022629faba02605e0e8af8a8c9645713":()=>Promise.resolve().then(s.bind(s,2449)).then(e=>e.$$ACTION_0),ed632e20977b91e6ea402bab649de27090a0ee47:()=>Promise.resolve().then(s.bind(s,2449)).then(e=>e.fetchCustomFoods),"367dc209dd2fdf097b31f5b71e50ba108ae3f123":()=>Promise.resolve().then(s.bind(s,13698)).then(e=>e.fetchFoodsHistory),cb9186e00c5be01753f62155531b4e6cef15b991:()=>Promise.resolve().then(s.bind(s,13698)).then(e=>e.$$ACTION_0),"6a87c37439f4089f529f7fabd394372ee953399e":()=>Promise.resolve().then(s.bind(s,19968)).then(e=>e.createCustomFood),ebc0e3185c11a268e46a358d1ed67a087a3eb887:()=>Promise.resolve().then(s.bind(s,19968)).then(e=>e.$$ACTION_0),"82dde3b48fab94c911a9f98f3bb8c59a069ede72":()=>Promise.resolve().then(s.bind(s,28317)).then(e=>e.deleteFood),ce576565f535bcbad4a930e5f6814907ceefd72a:()=>Promise.resolve().then(s.bind(s,28317)).then(e=>e.$$ACTION_0),"813f4d442d2c9b92710ddf1212296598abc28c6a":()=>Promise.resolve().then(s.bind(s,86489)).then(e=>e.registerMeal),a1666b55b2fc94ed021a59ca290beb7092675d72:()=>Promise.resolve().then(s.bind(s,86489)).then(e=>e.$$ACTION_0),be89e7bb6617af0a23ae48cefc188e6cf334430c:()=>Promise.resolve().then(s.bind(s,57076)).then(e=>e.fetchMeals),f1eedbe3c169d127f552e5c5d8c985e931af6b27:()=>Promise.resolve().then(s.bind(s,57076)).then(e=>e.$$ACTION_0),"3e8279eb3363b8a4a3ff00650dc3502ae373bfaa":()=>Promise.resolve().then(s.bind(s,30028)).then(e=>e.$$ACTION_0),"6bf7eb2f2329e353b8b07e51af6396a40d5b7b8e":()=>Promise.resolve().then(s.bind(s,30028)).then(e=>e.deleteMeal),"6970731a6fa653ebb8b0fe3aa1d9c8b58ec5a081":()=>Promise.resolve().then(s.bind(s,26210)).then(e=>e.updateMeal),"75e4cf5a8d25542c8dba192139597868e4624336":()=>Promise.resolve().then(s.bind(s,26210)).then(e=>e.$$ACTION_0),e00845c7b15f0a1c05269c75f8f7898eaadb5328:()=>Promise.resolve().then(s.bind(s,19525)).then(e=>e.fetchDailyCalsNutrients),f4997aa41f15a3adef6f481a6ffacaa85d87edf1:()=>Promise.resolve().then(s.bind(s,19525)).then(e=>e.$$ACTION_0),"8f758dba1c4981e0f8e3691d1c9e1f35a48fd432":()=>Promise.resolve().then(s.bind(s,7924)).then(e=>e.$$ACTION_0),"9b33d9685808d4a88868ba66022b2800b25d6f39":()=>Promise.resolve().then(s.bind(s,7924)).then(e=>e.fetchLogout)};async function a(e,...r){return(await t[e]()).apply(null,r)}e.exports={"19cb0e72dbbcbcf49c393ba7e48690d825ebad7c":a.bind(null,"19cb0e72dbbcbcf49c393ba7e48690d825ebad7c"),da73c8e80e35425672d08afa96053fc232e748c8:a.bind(null,"da73c8e80e35425672d08afa96053fc232e748c8"),"17ee4cb4022629faba02605e0e8af8a8c9645713":a.bind(null,"17ee4cb4022629faba02605e0e8af8a8c9645713"),ed632e20977b91e6ea402bab649de27090a0ee47:a.bind(null,"ed632e20977b91e6ea402bab649de27090a0ee47"),"367dc209dd2fdf097b31f5b71e50ba108ae3f123":a.bind(null,"367dc209dd2fdf097b31f5b71e50ba108ae3f123"),cb9186e00c5be01753f62155531b4e6cef15b991:a.bind(null,"cb9186e00c5be01753f62155531b4e6cef15b991"),"6a87c37439f4089f529f7fabd394372ee953399e":a.bind(null,"6a87c37439f4089f529f7fabd394372ee953399e"),ebc0e3185c11a268e46a358d1ed67a087a3eb887:a.bind(null,"ebc0e3185c11a268e46a358d1ed67a087a3eb887"),"82dde3b48fab94c911a9f98f3bb8c59a069ede72":a.bind(null,"82dde3b48fab94c911a9f98f3bb8c59a069ede72"),ce576565f535bcbad4a930e5f6814907ceefd72a:a.bind(null,"ce576565f535bcbad4a930e5f6814907ceefd72a"),"813f4d442d2c9b92710ddf1212296598abc28c6a":a.bind(null,"813f4d442d2c9b92710ddf1212296598abc28c6a"),a1666b55b2fc94ed021a59ca290beb7092675d72:a.bind(null,"a1666b55b2fc94ed021a59ca290beb7092675d72"),be89e7bb6617af0a23ae48cefc188e6cf334430c:a.bind(null,"be89e7bb6617af0a23ae48cefc188e6cf334430c"),f1eedbe3c169d127f552e5c5d8c985e931af6b27:a.bind(null,"f1eedbe3c169d127f552e5c5d8c985e931af6b27"),"3e8279eb3363b8a4a3ff00650dc3502ae373bfaa":a.bind(null,"3e8279eb3363b8a4a3ff00650dc3502ae373bfaa"),"6bf7eb2f2329e353b8b07e51af6396a40d5b7b8e":a.bind(null,"6bf7eb2f2329e353b8b07e51af6396a40d5b7b8e"),"6970731a6fa653ebb8b0fe3aa1d9c8b58ec5a081":a.bind(null,"6970731a6fa653ebb8b0fe3aa1d9c8b58ec5a081"),"75e4cf5a8d25542c8dba192139597868e4624336":a.bind(null,"75e4cf5a8d25542c8dba192139597868e4624336"),e00845c7b15f0a1c05269c75f8f7898eaadb5328:a.bind(null,"e00845c7b15f0a1c05269c75f8f7898eaadb5328"),f4997aa41f15a3adef6f481a6ffacaa85d87edf1:a.bind(null,"f4997aa41f15a3adef6f481a6ffacaa85d87edf1"),"8f758dba1c4981e0f8e3691d1c9e1f35a48fd432":a.bind(null,"8f758dba1c4981e0f8e3691d1c9e1f35a48fd432"),"9b33d9685808d4a88868ba66022b2800b25d6f39":a.bind(null,"9b33d9685808d4a88868ba66022b2800b25d6f39")}},64574:(e,r,s)=>{Promise.resolve().then(s.bind(s,55495))},55495:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>W});var t=s(10326),a=s(45884),n=s(29319),i=s(66627),l=s(17577),d=s(23703),o=s(10123);s(15424);var c=s(46242),m=(0,c.$)("19cb0e72dbbcbcf49c393ba7e48690d825ebad7c"),u=s(74132),x=s(39530),g=s(14357);let f=o.Ry().shape({searchKey:o.Z_().trim().required("Search key is required!")}),b=()=>{let e=(0,x.TL)(),[r,s]=(0,l.useState)(!1),a=(0,d.TA)({initialValues:{searchKey:""},validationSchema:f,onSubmit:async(r,{resetForm:s})=>{try{let s=await m(r.searchKey);if("error"in s){e((0,u.fz)({message:s.error,type:"error"})),setTimeout(()=>e((0,u.Qu)()),3e3);return}"message"in s&&(e((0,g.bI)()),e((0,g.RR)(s.data)))}catch(e){}finally{s()}}});return(0,t.jsxs)("div",{className:"flex items-center bg-green-300 p-1 rounded w-80",children:[(0,t.jsxs)("form",{onSubmit:a.handleSubmit,className:"flex items-center",children:[t.jsx("input",{type:"text",id:"searchKey",name:"searchKey",value:a.values.searchKey,onChange:a.handleChange,onBlur:a.handleBlur,placeholder:"Search Food",className:"px-2 py-1 text-gray-700 bg-white border rounded-l-md text-xs w-48 focus:outline-none"}),t.jsx("button",{type:"submit",className:"flex items-center justify-center px-2 py-1 text-white bg-slate-100 border border-l-0 rounded-r-md hover:bg-gray-200 text-xs",children:(0,t.jsxs)("span",{className:"flex items-center",children:[t.jsx("svg",{className:"w-3 h-3 mr-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}),t.jsx("span",{className:"text-slate-500 ",children:"Search"})]})})]}),(0,t.jsxs)("div",{className:"ml-2 relative",children:[t.jsx("button",{onClick:()=>{s(!0)},className:"text-gray-700 text-xs hover:border-b border-color-black",children:"How ?"}),r&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-600 bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow-lg max-w-lg mx-4 my-8 relative",children:[t.jsx("button",{onClick:()=>{s(!1)},className:"absolute top-4 right-4 bg-gray-300 text-gray-700 p-1 rounded-full text-xs",children:"âœ•"}),t.jsx("h2",{className:"text-lg font-bold mb-4",children:"How to Search"}),(0,t.jsxs)("ul",{className:"list-disc list-inside",children:[t.jsx("li",{children:"Search using alphabets."}),t.jsx("li",{children:'Examples: search using product names, food names, types such as "McDonald" or "mushroom".'})]})]})})]})]})};var h=(0,c.$)("ed632e20977b91e6ea402bab649de27090a0ee47");let p=()=>{let e=(0,x.TL)(),r=(0,x.CG)(e=>e.load.custom_food_loading),s=async()=>{try{let r=await h();if("error"in r){e((0,u.fz)({message:r.error,type:"error"})),setTimeout(()=>e((0,u.Qu)()),3e3);return}"message"in r&&(e((0,g.bI)()),e((0,g.RR)(r.data)))}catch(e){}};return(0,l.useEffect)(()=>{r&&s()},[r,e]),(0,t.jsxs)("button",{className:"w-[60px] h-[50px] cursor-pointer p-3 bg-gradient-to-b from-orange-300 to-orange-500 hover:from-orange-400 hover:to-orange-600 shadow-md rounded-lg flex flex-col items-center",onClick:s,children:[t.jsx("p",{className:"text-sm font-bold text-white shadow-text",children:"Custom"}),t.jsx("p",{className:"text-[10px] font-normal text-white shadow-text",children:" Foods"})]})};var v=(0,c.$)("367dc209dd2fdf097b31f5b71e50ba108ae3f123");let y=()=>{let e=(0,x.TL)(),r=async()=>{try{let r=await v();if("error"in r){e((0,u.fz)({message:r.error,type:"error"})),setTimeout(()=>e((0,u.Qu)()),3e3);return}"message"in r&&(e((0,g.bI)()),e((0,g.RR)(r.data)))}catch(e){}};return(0,t.jsxs)("button",{className:"w-[60px] h-[50px] cursor-pointer p-2 bg-gradient-to-b from-yellow-300 to-yellow-500 hover:from-yellow-400 hover:to-yellow-600 shadow-md rounded-lg flex flex-col items-center",onClick:r,children:[t.jsx("p",{className:"text-[8px] font-normal text-white",children:"Choose from"}),t.jsx("p",{className:"text-xs font-bold text-white shadow-text",children:"History"})]})};var j=s(41135),w=s(44046),N=(0,c.$)("6a87c37439f4089f529f7fabd394372ee953399e"),_=s(3062);let C=o.Ry().shape({name:o.Z_().max(30,"Name must be less than 30 characters").required("Name is required!"),cal:o.Rx().min(1,"Calories must be greater than 0").required("Calories are required!"),g_per_serving:o.Rx().nullable(),carb:o.Rx().min(0,"Value must be 0 or greater").required("Carb is required"),fat:o.Rx().min(0,"Value must be 0 or greater").required("Fat is required"),protein:o.Rx().min(0,"Value must be 0 or greater").required("Protein is required"),sugars:o.Rx().min(0,"Value must be 0 or greater").required("Sugars is required"),dietary_fiber:o.Rx().min(0,"Value must be 0 or greater").required("Dietary fiber is required"),salt:o.Rx().min(0,"Value must be 0 or greater").required("Salt is required"),sodium:o.Rx().min(0,"Value must be 0 or greater").required("Sodium is required"),potassium:o.Rx().min(0,"Value must be 0 or greater").required("Potassium is required"),calcium:o.Rx().min(0,"Value must be 0 or greater").required("Calcium is required"),magnesium:o.Rx().min(0,"Value must be 0 or greater").required("Magnesium is required"),iron:o.Rx().min(0,"Value must be 0 or greater").required("Iron is required"),zinc:o.Rx().min(0,"Value must be 0 or greater").required("Zinc is required"),vitamin_a:o.Rx().min(0,"Value must be 0 or greater").required("Vitamin A is required"),vitamin_d:o.Rx().min(0,"Value must be 0 or greater").required("Vitamin D is required"),vitamin_e:o.Rx().min(0,"Value must be 0 or greater").required("Vitamin E is required"),vitamin_b1:o.Rx().min(0,"Value must be 0 or greater").required("Vitamin B1 is required"),vitamin_b2:o.Rx().min(0,"Value must be 0 or greater").required("Vitamin B2 is required"),vitamin_b12:o.Rx().min(0,"Value must be 0 or greater").required("Vitamin B12 is required"),vitamin_b6:o.Rx().min(0,"Value must be 0 or greater").required("Vitamin B6 is required"),vitamin_c:o.Rx().min(0,"Value must be 0 or greater").required("Vitamin C is required"),niacin:o.Rx().min(0,"Value must be 0 or greater").required("Niacin is required"),cholesterol:o.Rx().min(0,"Value must be 0 or greater").required("Cholesterol is required"),saturated_fat:o.Rx().min(0,"Value must be 0 or greater").required("Saturated fat is required"),polyunsaturated_fat:o.Rx().min(0,"Value must be 0 or greater").required("Polyunsaturated fat is required"),monounsaturated_fat:o.Rx().min(0,"Value must be 0 or greater").required("Monounsaturated fat is required")});function T(){let e=(0,x.TL)(),[r,s]=(0,l.useState)(!1),[a,n]=(0,l.useState)(!1),i=(0,d.TA)({initialValues:{name:"",cal:1,g_per_serving:null,carb:0,fat:0,protein:0,sugars:0,dietary_fiber:0,salt:0,sodium:0,potassium:0,calcium:0,magnesium:0,iron:0,zinc:0,vitamin_a:0,vitamin_d:0,vitamin_e:0,vitamin_b1:0,vitamin_b2:0,vitamin_b12:0,vitamin_b6:0,vitamin_c:0,niacin:0,cholesterol:0,saturated_fat:0,polyunsaturated_fat:0,monounsaturated_fat:0},validationSchema:C,onSubmit:async r=>{try{e((0,_.ly)(!0));let t=await N(r);"error"in t?(e((0,u.fz)({message:t.error,type:"error"})),setTimeout(()=>e((0,u.Qu)()),4e3)):"message"in t&&(e((0,u.fz)({message:t.message,type:"success"})),setTimeout(()=>e((0,u.Qu)()),3e3),s(!1))}catch(r){e((0,u.fz)({message:"An error occurred while creating the custom food.",type:"error"})),setTimeout(()=>e((0,u.Qu)()),3e3)}finally{e((0,_.ly)(!1))}}});return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{className:"flex items-center px-3 py-1 text-xs font-medium text-white bg-gradient-to-r from-orange-400 to-orange-600 rounded-md shadow hover:from-orange-500 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",onClick:()=>s(!0),children:[t.jsx(w.wEH,{className:"mr-1"}),"Create Custom Item"]}),r&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto flex justify-center items-center",children:[t.jsx("div",{className:"fixed inset-0 transition-opacity",children:t.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsxs)("div",{className:"relative z-50 bg-white rounded-lg w-full max-w-lg p-6 mx-4 my-8",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[t.jsx("h2",{className:"text-2xl font-bold leading-9 tracking-tight mb-4",children:"Create Custom Food"}),t.jsx("p",{className:"text-sm mb-2 text-red-600",children:"Note: Please ensure the nutritional information is accurate."}),(0,t.jsxs)("form",{onSubmit:i.handleSubmit,className:"h-[510px] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Name *"}),(0,t.jsxs)("div",{className:"w-2/3",children:[t.jsx("input",{type:"text",id:"name",name:"name",value:i.values.name,onChange:i.handleChange,onBlur:i.handleBlur,className:(0,j.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":i.touched.name&&i.errors.name}),autoComplete:"off"}),i.errors.name&&i.touched.name&&t.jsx("p",{className:"text-red-500 text-xs",children:i.errors.name})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[t.jsx("label",{htmlFor:"cal",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Calories *"}),(0,t.jsxs)("div",{className:"w-2/3",children:[t.jsx("input",{type:"number",id:"cal",name:"cal",value:i.values.cal,onChange:i.handleChange,onBlur:i.handleBlur,className:(0,j.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":i.touched.cal&&i.errors.cal}),autoComplete:"off"}),i.errors.cal&&i.touched.cal&&t.jsx("p",{className:"text-red-500 text-xs",children:i.errors.cal})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[t.jsx("label",{htmlFor:"g_per_serving",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Grams per Serving"}),(0,t.jsxs)("div",{className:"w-2/3",children:[t.jsx("input",{type:"number",id:"g_per_serving",name:"g_per_serving",value:i.values.g_per_serving||"",onChange:i.handleChange,onBlur:i.handleBlur,className:(0,j.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":i.touched.g_per_serving&&i.errors.g_per_serving}),autoComplete:"off"}),i.errors.g_per_serving&&i.touched.g_per_serving&&t.jsx("p",{className:"text-red-500 text-xs",children:i.errors.g_per_serving})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[t.jsx("label",{htmlFor:"carb",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Carbs (g)"}),(0,t.jsxs)("div",{className:"w-2/3",children:[t.jsx("input",{type:"number",id:"carb",name:"carb",value:i.values.carb,onChange:i.handleChange,onBlur:i.handleBlur,className:(0,j.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":i.touched.carb&&i.errors.carb}),autoComplete:"off"}),i.errors.carb&&i.touched.carb&&t.jsx("p",{className:"text-red-500 text-xs",children:i.errors.carb})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[t.jsx("label",{htmlFor:"fat",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Fat (g)"}),(0,t.jsxs)("div",{className:"w-2/3",children:[t.jsx("input",{type:"number",id:"fat",name:"fat",value:i.values.fat,onChange:i.handleChange,onBlur:i.handleBlur,className:(0,j.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":i.touched.fat&&i.errors.fat}),autoComplete:"off"}),i.errors.fat&&i.touched.fat&&t.jsx("p",{className:"text-red-500 text-xs",children:i.errors.fat})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[t.jsx("label",{htmlFor:"protein",className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:"Protein (g)"}),(0,t.jsxs)("div",{className:"w-2/3",children:[t.jsx("input",{type:"number",id:"protein",name:"protein",value:i.values.protein,onChange:i.handleChange,onBlur:i.handleBlur,className:(0,j.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":i.touched.protein&&i.errors.protein}),autoComplete:"off"}),i.errors.protein&&i.touched.protein&&t.jsx("p",{className:"text-red-500 text-xs",children:i.errors.protein})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",className:"mt-2 mb-1 text-sm font-medium text-blue-500 underline hover:text-blue-700 focus:outline-none",onClick:()=>n(!a),children:a?"Hide Other Nutrients":"Show Other Nutrients"})}),a&&t.jsx(t.Fragment,{children:["sugars","dietary_fiber","salt","sodium","potassium","calcium","magnesium","iron","zinc","vitamin_a","vitamin_d","vitamin_e","vitamin_b1","vitamin_b2","vitamin_b12","vitamin_b6","vitamin_c","niacin","cholesterol","saturated_fat","polyunsaturated_fat","monounsaturated_fat"].map(e=>(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[t.jsx("label",{htmlFor:e,className:"block text-sm font-medium leading-6 text-gray-900 w-1/3",children:e.replace(/_/g," ").toUpperCase()}),(0,t.jsxs)("div",{className:"w-2/3",children:[t.jsx("input",{type:"number",id:e,name:e,value:null!==i.values[e]&&void 0!==i.values[e]?i.values[e]:"",onChange:i.handleChange,onBlur:i.handleBlur,className:(0,j.Z)("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",{"border-2 border-red-500 bg-red-100 text-red-800":i.touched[e]&&i.errors[e]}),autoComplete:"off"}),i.touched[e]&&i.errors[e]&&t.jsx("p",{className:"text-red-500 text-xs",children:i.errors[e]})]})]},e))}),t.jsx("section",{className:"w-full flex flex-col gap-y-3 justify-start items-end lg:items-center lg:flex-row lg:gap-y-0 lg:justify-between",children:t.jsx("button",{type:"submit",className:"flex w-full order-1 lg:order-2 lg:w-fit justify-center rounded-md bg-green-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:"Create"})})]}),t.jsx("button",{className:"absolute top-4 right-4 bg-gray-300 text-gray-700 p-1 rounded-full text-xs",onClick:()=>s(!1),children:"âœ•"})]})]})]})}let k=()=>(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[t.jsx("div",{className:"mb-4",children:t.jsx("h2",{className:"text-base font-semibold",children:"Step 1: Search for Food"})}),t.jsx(b,{}),(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"mr-1",children:t.jsx(p,{})}),t.jsx("div",{className:"mr-1",children:t.jsx(y,{})})]}),t.jsx("div",{className:"flex",children:t.jsx("div",{className:"mr-1",children:t.jsx(T,{})})})]});var S=s(88736),F=s.n(S),R=s(94835),$=(0,c.$)("82dde3b48fab94c911a9f98f3bb8c59a069ede72");let q=({id:e})=>{let r=(0,x.TL)();return t.jsx("div",{className:"flex items-center gap-x-2 p-2",children:t.jsx("button",{className:"hover:text-red-800 transition",onClick:()=>{F().fire({title:"Are you sure?",text:"This action will delete the food and all associated meals. Do you really want to proceed?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async s=>{if(s.isConfirmed)try{r((0,_.Tr)(!0)),r((0,_.ly)(!0));let s=await $(e);"error"in s?r((0,u.fz)({message:s.error,type:"error"})):"detail"in s?r((0,u.fz)({message:s.detail,type:"error"})):"message"in s&&r((0,u.fz)({message:s.message,type:"success"}))}catch(e){r((0,u.fz)({message:"An error occurred while deleting the food.",type:"error"}))}finally{r((0,u.Qu)()),r((0,_.Tr)(!1)),r((0,_.ly)(!1))}})},children:t.jsx(R.I0,{size:15})})})},P=()=>{let e=(0,x.TL)(),r=(0,x.CG)(e=>e.food_meal.select_food_list),s=r=>{"food_id"in r?(e((0,g.km)(r)),e((0,g.Fe)())):(e((0,g.x9)(r)),e((0,g.zo)()))};return t.jsx(t.Fragment,{children:r&&t.jsx("div",{className:"lg:mx-auto lg:w-full lg:max-w-md",children:(0,t.jsxs)("div",{className:"bg-white border border-gray-300 rounded-md",children:[t.jsx("div",{className:"bg-green-100 px-4 py-2 text-left text-xs font-medium text-gray-500 rounded-t-md",children:"Select Menu"}),t.jsx("div",{className:"flex flex-col h-56 overflow-y-auto",children:r.length>0?t.jsx("table",{className:"min-w-full divide-y divide-gray-200",children:t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>t.jsx("tr",{className:"hover:bg-gray-100 cursor-pointer",children:(0,t.jsxs)("td",{className:"px-2 py-2 text-sm text-gray-900 truncate max-w-xs flex items-center",title:e.name,onClick:()=>s(e),children:[(0,t.jsxs)("span",{className:"font-semibold",children:[e.name," "]}),"food_id"in e?(0,t.jsxs)("span",{children:[" ",e.brand_name&&(0,t.jsxs)(t.Fragment,{children:["(",e.brand_name,")"]})]}):t.jsx(q,{id:e.id})]})},e.id))})}):t.jsx("p",{className:"text-gray-500 p-4",children:"No food yet"})})]})})})},V=({date:e,meal_type:r})=>(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[t.jsx("div",{className:"mb-4",children:t.jsx("h2",{className:"text-base font-semibold",children:"Step 2: Select Foods for Your Meal"})}),t.jsx("div",{className:"space-y-4",children:t.jsx(P,{})})]});var E=s(35047),A=(0,c.$)("813f4d442d2c9b92710ddf1212296598abc28c6a");let z=o.Ry().shape({grams:o.Rx().nullable().transform((e,r)=>""===r?null:r).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:r}=this.parent;return null!==e||null!==r}),servings:o.Rx().nullable().transform((e,r)=>""===r?null:r).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:r}=this.parent;return null!==e||null!==r})}),I={grams:null,servings:1},B=({date:e,meal_type:r})=>{(0,E.useRouter)();let s=(0,x.TL)(),a=(0,x.CG)(e=>e.food_meal?.used_food),[n,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(!1),m=(0,x.CG)(e=>e.load.custom_food_loading);(0,l.useEffect)(()=>{s((0,g.Fe)())},[m]);let f=(0,d.TA)({initialValues:I,validationSchema:z,onSubmit:async t=>{if(a)try{s((0,_.Tr)(!0)),s((0,_.yP)(!0));let n=await A({...t,food:a.id,date:e,meal_type:r});"error"in n?(s((0,u.fz)({message:n.error,type:"error"})),setTimeout(()=>s((0,u.Qu)()),3e3)):"message"in n&&(s((0,u.fz)({message:n.message,type:"success"})),setTimeout(()=>s((0,u.Qu)()),4e3),s((0,g.Fe)()))}catch(e){s((0,u.fz)({message:"An error occurred while registering the meal.",type:"error"})),setTimeout(()=>s((0,u.Qu)()),3e3)}finally{s((0,_.Tr)(!1)),s((0,_.yP)(!1))}else{s((0,u.fz)({message:"You need to choose food.",type:"error"})),setTimeout(()=>s((0,u.Qu)()),3e3);return}}}),b=e=>{"custom"===e?c(!o):(f.setFieldValue("servings",e),f.setFieldValue("grams",null),i(!1))};return t.jsx(t.Fragment,{children:a&&(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[t.jsx("div",{className:"text-gray-700 font-medium items-start text-base",children:a.name}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(a.protein)," g F: ",Math.round(a.fat)," g C: ",Math.round(a.carb)," g (",Math.round(a.cal)," kcal) / serving"]})]}),(0,t.jsxs)("form",{onSubmit:f.handleSubmit,className:"space-y-6 mt-4",children:[(0,t.jsxs)("div",{children:[a.g_per_serving?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:(0,j.Z)(n?"block":"hidden"),children:[t.jsx("input",{id:"grams",name:"grams",type:"number",onChange:e=>{let r=e.target.value;f.setFieldValue("grams",""===r?null:parseFloat(r)),""!==r&&f.setFieldValue("servings",null)},onBlur:f.handleBlur,value:f.values.grams??"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),t.jsx("span",{className:"text-[15px]",children:" (g)"})]}),f.touched.grams&&f.errors.grams?t.jsx("div",{className:"text-red-600 text-sm",children:f.errors.grams}):null]}):null,(0,t.jsxs)("div",{className:(0,j.Z)(n?"hidden":"block"),children:[t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:[.25,.5,.75,1,1.5,2,3].map(e=>t.jsx("button",{type:"button",onClick:()=>b(e),className:(0,j.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",f.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,t.jsxs)("div",{className:"flex mt-4",children:[t.jsx("button",{type:"button",onClick:()=>b("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),o&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("input",{id:"servings",name:"servings",type:"number",onChange:e=>{let r=e.target.value;f.setFieldValue("servings",""===r?null:parseFloat(r)),""!==r&&f.setFieldValue("grams",null)},onBlur:f.handleBlur,value:f.values.servings??"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),t.jsx("span",{className:"text-[15px]",children:" (servings)"})]})]}),f.touched.servings&&f.errors.servings?t.jsx("div",{className:"text-red-600 text-sm",children:f.errors.servings}):null]})]}),a.g_per_serving?t.jsx("div",{children:t.jsx("button",{type:"button",className:"w-[160px] inline-flex justify-center py-1 px-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>{i(!n),n?(f.setFieldValue("grams",null),f.setFieldValue("servings",null)):(f.setFieldValue("grams",null),f.setFieldValue("servings",1),c(!1))},children:n?"Input by Servings":"Input by Grams"})}):null,t.jsx("div",{children:t.jsx("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Register Meal"})})]})]})})},M=o.Ry().shape({grams:o.Rx().nullable().transform((e,r)=>""===r?null:r).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:r}=this.parent;return null!==e||null!==r}),servings:o.Rx().nullable().transform((e,r)=>""===r?null:r).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:r}=this.parent;return null!==e||null!==r})}),Z={grams:null,servings:null},O=({date:e,meal_type:r})=>{(0,E.useRouter)();let s=(0,x.TL)(),a=(0,x.CG)(e=>e.food_meal?.used_fatsecret_food),[n,i]=(0,l.useState)(!1),o=(0,d.TA)({initialValues:Z,validationSchema:M,onSubmit:async t=>{if(a)try{s((0,_.Tr)(!0)),s((0,_.yP)(!0));let n=await A({...t,fat_secret_food:a.id,date:e,meal_type:r});"error"in n?(s((0,u.fz)({message:n.error,type:"error"})),setTimeout(()=>s((0,u.Qu)()),3e3)):"message"in n&&(s((0,u.fz)({message:n.message,type:"success"})),setTimeout(()=>s((0,u.Qu)()),4e3),s((0,g.zo)()))}catch(e){s((0,u.fz)({message:"An error occurred while registering the meal.",type:"error"})),setTimeout(()=>s((0,u.Qu)()),3e3)}finally{s((0,_.Tr)(!1)),s((0,_.yP)(!1))}else{s((0,u.fz)({message:"You need to choose food.",type:"error"})),setTimeout(()=>s((0,u.Qu)()),3e3);return}}}),c=e=>{"custom"===e?i(!n):(o.setFieldValue("servings",e),o.setFieldValue("grams",null),i(!1))};return t.jsx(t.Fragment,{children:a&&(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,t.jsxs)("div",{className:"text-gray-700 font-medium items-start text-base",children:[a.name,a.brand_name?(0,t.jsxs)(t.Fragment,{children:[" (",a.brand_name,")"]}):(0,t.jsxs)(t.Fragment,{children:[" (",a.type,")"]})]}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(a.protein)," g F: ",Math.round(a.fat)," g C: ",Math.round(a.carb)," g (",Math.round(a.cal)," kcal) / ",a.unit]})]}),(0,t.jsxs)("form",{onSubmit:o.handleSubmit,className:"space-y-6 mt-4",children:[t.jsx("div",{children:"100g"===a.unit?(0,t.jsxs)("div",{children:[t.jsx("input",{id:"grams",name:"grams",type:"number",onChange:e=>{let r=e.target.value;o.setFieldValue("grams",""===r?null:parseFloat(r)),""!==r&&o.setFieldValue("servings",null)},onBlur:o.handleBlur,value:o.values.grams??"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",t.jsx("span",{className:"text-[15px]",children:" (g)"}),o.touched.grams&&o.errors.grams?t.jsx("div",{className:"text-red-600 text-sm",children:o.errors.grams}):null]}):(0,t.jsxs)("div",{children:[t.jsx("div",{className:"flex flex-wrap gap-1 mt-2 ",children:[.25,.5,.75,1,1.5,2,3].map(e=>t.jsx("button",{type:"button",onClick:()=>c(e),className:(0,j.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",o.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,t.jsxs)("div",{className:"flex mt-4",children:[t.jsx("button",{type:"button",onClick:()=>c("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),n&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("input",{id:"servings",name:"servings",type:"number",onChange:e=>{let r=e.target.value;o.setFieldValue("servings",""===r?null:parseFloat(r)),""!==r&&o.setFieldValue("grams",null)},onBlur:o.handleBlur,value:o.values.servings??"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",(0,t.jsxs)("span",{className:"text-[15px]",children:[" (",a.unit,")"]})]})]}),o.touched.servings&&o.errors.servings?t.jsx("div",{className:"text-red-600 text-sm",children:o.errors.servings}):null]})}),t.jsx("div",{children:t.jsx("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Register Meal"})})]})]})})},L=({date:e,meal_type:r})=>(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4",children:[t.jsx("div",{className:"mb-4",children:t.jsx("h2",{className:"text-base font-semibold",children:"Step 3: Register Your Meal"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx(B,{date:e,meal_type:r}),t.jsx(O,{date:e,meal_type:r})]})]});var G=s(72766),Q=s(47258);let D=({date:e,meal_type:r})=>{let s=(0,x.TL)(),[a,n]=(0,l.useState)([]),i=(0,x.CG)(e=>e.load.meal_loading);(0,l.useEffect)(()=>{(async()=>{try{let t=await (0,G.x)(e,r);if("error"in t){s((0,u.fz)({message:t.error,type:"error"})),setTimeout(()=>s((0,u.Qu)()),3e3);return}"message"in t&&n(t.data)}catch(e){}})()},[i]);let d=async e=>{s((0,g.GA)(e)),(0,g.Fe)()},o=a.reduce((e,r)=>e+(r.intake_cal||0),0);return(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"sm:mx-auto md:w-full sm:max-w-sm flex justify-between items-center",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{className:"text-xs mr-2",children:[e,"  "]}),t.jsx("span",{className:"text-sm font-medium mr-2",children:r}),(0,t.jsxs)("span",{className:"text-sm font-semi-bold",children:["(Total: ",Math.round(o)," kcal)"]})]})}),t.jsx("div",{className:"lg:mx-auto sm:w-full lg:max-w-sm max-h-[357px] max-md:h-auto overflow-y-auto",children:a.length>0?(0,t.jsxs)("table",{className:"min-w-full divide-y divide-green-200 border border-green-400",children:[t.jsx("thead",{className:"bg-green-100",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"px-2 py-1 text-left text-xs font-medium text-green-800",children:"item"}),t.jsx("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"amount"}),t.jsx("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"kcal"}),t.jsx("th",{className:"px-2 py-1 text-center text-xs font-medium text-green-800",children:"delete"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-green-200",children:a.map(e=>(0,t.jsxs)("tr",{className:"whitespace-nowrap",children:[t.jsx("td",{className:"px-2 py-1 text-xs font-medium text-gray-900 w-32",children:(0,t.jsxs)("button",{className:"w-[120px] hover:border-b",onClick:()=>d(e),children:[t.jsx("div",{className:"overflow-ellipsis overflow-hidden whitespace-nowrap",children:e.food&&e.food.name}),t.jsx("div",{className:"overflow-ellipsis overflow-hidden whitespace-nowrap",children:e.fat_secret_food&&e.fat_secret_food.name})]})}),t.jsx("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:null!==e.servings?(0,t.jsxs)(t.Fragment,{children:[e.servings,e.food&&" servings",e.fat_secret_food&&` ${e.fat_secret_food.unit}`]}):null!==e.grams?`${e.grams} (g)`:"Serving information not available"}),(0,t.jsxs)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:[t.jsx("strong",{children:Math.round(e.intake_cal)})," kcal"]}),t.jsx("td",{className:"px-2 py-1 text-center text-xs text-red-600",children:t.jsx(Q.Z,{id:e.id})})]},e.id))})]}):(0,t.jsxs)("p",{className:"text-gray-500",children:["No meals recorded for ",r,"."]})})]})};var U=(0,c.$)("6970731a6fa653ebb8b0fe3aa1d9c8b58ec5a081");let H=o.Ry().shape({grams:o.Rx().nullable().transform((e,r)=>""===r?null:r).min(1,"Grams must be greater than 0").test("either-grams-or-servings","Either servings or grams must be provided",function(e){let{servings:r}=this.parent;return null!==e||null!==r}),servings:o.Rx().nullable().transform((e,r)=>""===r?null:r).min(.1,"Servings must be greater than 0.1").max(10,"Servings must be less than 10.0").test("either-servings-or-grams","Either servings or grams must be provided",function(e){let{grams:r}=this.parent;return null!==e||null!==r})}),Y=()=>{(0,E.useRouter)();let e=(0,x.TL)(),r=(0,x.CG)(e=>e.food_meal?.edit_meal),[s,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),o=(0,x.CG)(e=>e.load.custom_food_loading);(0,l.useEffect)(()=>{e((0,g.Xl)())},[o]);let c={grams:r?.grams??null,servings:r?.servings??1};(0,l.useEffect)(()=>{r&&(m.setValues({grams:r.grams??null,servings:r.servings??null}),r.grams&&!r.servings?a(!0):a(!1))},[r]);let m=(0,d.TA)({initialValues:c,validationSchema:H,onSubmit:async s=>{if(r)try{e((0,_.Tr)(!0)),e((0,_.yP)(!0));let t=await U(s,r.id);if("error"in t){e((0,u.fz)({message:t.error,type:"error"})),setTimeout(()=>e((0,u.Qu)()),3e3);return}"message"in t&&(e((0,u.fz)({message:t.message,type:"success"})),setTimeout(()=>e((0,u.Qu)()),4e3),e((0,g.Xl)()))}catch(r){e((0,u.fz)({message:"An error occurred while updating the meal.",type:"error"})),setTimeout(()=>e((0,u.Qu)()),3e3)}finally{e((0,_.Tr)(!1)),e((0,_.yP)(!1))}else{e((0,u.fz)({message:"You need to choose meal.",type:"error"})),setTimeout(()=>e((0,u.Qu)()),3e3);return}}}),f=[.25,.5,.75,1,1.5,2,3],b=e=>{let r=e.target.value;m.setFieldValue("grams",""===r?null:parseFloat(r)),""!==r&&m.setFieldValue("servings",null)},h=e=>{let r=e.target.value;m.setFieldValue("servings",""===r?null:parseFloat(r)),""!==r&&m.setFieldValue("grams",null)},p=e=>{"custom"===e?i(!n):(m.setFieldValue("servings",e),m.setFieldValue("grams",null),a(!1))};return t.jsx(t.Fragment,{children:r&&(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-10 border rounded-lg shadow-md p-4",children:[r.food&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[t.jsx("div",{className:"text-gray-700 font-medium items-start text-base",children:r.food.name}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(r.food.protein)," g F: ",Math.round(r.food.fat)," g C: ",Math.round(r.food.carb)," g (",Math.round(r.food.cal)," kcal) / serving"]})]}),(0,t.jsxs)("form",{onSubmit:m.handleSubmit,className:"space-y-6 mt-4",children:[(0,t.jsxs)("div",{children:[r.food.g_per_serving?(0,t.jsxs)("div",{className:(0,j.Z)(s?"block":"hidden"),children:[t.jsx("input",{id:"grams",name:"grams",type:"number",onChange:b,onBlur:m.handleBlur,value:m.values.grams??"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),t.jsx("span",{className:"text-[15px]",children:" (g)"}),m.touched.grams&&m.errors.grams?t.jsx("div",{className:"text-red-600 text-sm",children:m.errors.grams}):null]}):null,(0,t.jsxs)("div",{className:(0,j.Z)(s?"hidden":"block"),children:[t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:f.map(e=>t.jsx("button",{type:"button",onClick:()=>p(e),className:(0,j.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",m.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,t.jsxs)("div",{className:"flex mt-4",children:[t.jsx("button",{type:"button",onClick:()=>p("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),n&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("input",{id:"servings",name:"servings",type:"number",onChange:h,onBlur:m.handleBlur,value:m.values.servings??"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),t.jsx("span",{className:"text-[15px]",children:" (servings)"})]})]}),m.touched.servings&&m.errors.servings?t.jsx("div",{className:"text-red-600 text-sm",children:m.errors.servings}):null]})]}),r.food.g_per_serving?t.jsx("div",{children:t.jsx("button",{type:"button",className:"w-[160px] inline-flex justify-center py-1 px-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>{a(!s),s?(m.setFieldValue("grams",null),m.setFieldValue("servings",null)):(m.setFieldValue("grams",null),m.setFieldValue("servings",1),i(!1))},children:s?"Input by Servings":"Input by Grams"})}):null,t.jsx("div",{children:t.jsx("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Meal"})})]})]}),r.fat_secret_food&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between items-center p-2 bg-green-100 rounded-md",children:[(0,t.jsxs)("div",{className:"text-gray-700 font-medium text-base",children:[r.fat_secret_food.name,r.fat_secret_food.brand_name?(0,t.jsxs)(t.Fragment,{children:[" (",r.fat_secret_food.brand_name,")"]}):(0,t.jsxs)(t.Fragment,{children:[" (",r.fat_secret_food.type,")"]})]}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["P: ",Math.round(r.fat_secret_food.protein)," g F: ",Math.round(r.fat_secret_food.fat)," g C: ",Math.round(r.fat_secret_food.carb)," g (",Math.round(r.fat_secret_food.cal)," kcal) / ",r.fat_secret_food.unit]})]}),(0,t.jsxs)("form",{onSubmit:m.handleSubmit,className:"space-y-6 mt-4",children:[t.jsx("div",{children:"100g"===r.fat_secret_food.unit?(0,t.jsxs)("div",{children:[t.jsx("input",{id:"grams",name:"grams",type:"number",onChange:b,onBlur:m.handleBlur,value:m.values.grams??"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"})," ",t.jsx("span",{className:"text-[15px]",children:" (g)"}),m.touched.grams&&m.errors.grams?t.jsx("div",{className:"text-red-600 text-sm",children:m.errors.grams}):null]}):(0,t.jsxs)("div",{children:[t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:f.map(e=>t.jsx("button",{type:"button",onClick:()=>p(e),className:(0,j.Z)("px-2 py-2 border rounded-md text-[10px] w-[32px]",m.values.servings===e?"bg-green-500 text-white":"bg-white text-green-500 border-green-500"),children:e},e))}),(0,t.jsxs)("div",{className:"flex mt-4",children:[t.jsx("button",{type:"button",onClick:()=>p("custom"),className:"w-[100px] px-2 py-1 border rounded-md text-[10px] bg-white text-green-500 border-green-500 mr-2",children:"Input manually"}),n&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("input",{id:"servings",name:"servings",type:"number",onChange:h,onBlur:m.handleBlur,value:m.values.servings??"",className:"w-[100px] px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"}),(0,t.jsxs)("span",{className:"text-[15px]",children:[" (",r.fat_secret_food.unit,")"]})]})]}),m.touched.servings&&m.errors.servings?t.jsx("div",{className:"text-red-600 text-sm",children:m.errors.servings}):null]})}),t.jsx("div",{children:t.jsx("button",{type:"submit",className:"w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Edit Meal"})})]})]})]})})},K=({date:e,meal_type:r})=>(0,t.jsxs)(t.Fragment,{children:[t.jsx("hr",{}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow-md space-y-4 max-md:mt-3",children:[t.jsx("div",{className:"mb-4",children:t.jsx("h2",{className:"text-base font-semibold",children:"Manage Your Meals"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx(D,{date:e,meal_type:r}),t.jsx(Y,{})]})]}),t.jsx("hr",{})]});var X=s(49041),J=s(95908);let W=async({params:{meal_type:e,date:r}})=>{let s=new Date,d=(0,a.W)(),o=new Date(s);o.setDate(o.getDate()+2);let c=o.toISOString().split("T")[0],m=/^\d{4}-\d{2}-\d{2}$/.test(r)&&!isNaN(Date.parse(r))&&r<=c?r:d,u=["Breakfast","Lunch","Dinner","Snack"].includes(e)?e:"Breakfast";return(0,l.useEffect)(()=>{let e=e=>{e.message.includes("Minified React error")&&e.preventDefault()};return window.addEventListener("error",e),()=>{window.removeEventListener("error",e)}},[]),(0,t.jsxs)(t.Fragment,{children:[t.jsx(X.Z,{date:m}),t.jsx(i.Z,{date:m}),t.jsx(n.Z,{date:m}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("div",{className:"flex w-5/6 max-lg:w-full max-lg:flex-col-reverse",children:[(0,t.jsxs)("div",{className:"w-1/2 max-lg:w-full",children:[t.jsx(k,{}),t.jsx(V,{date:m,meal_type:u}),t.jsx(L,{date:m,meal_type:u})]}),(0,t.jsxs)("div",{className:"lg:hidden flex ",children:[t.jsx("div",{className:"w-1/3 max-sm:w-1/2 h-[180px] border",children:t.jsx(J.Z,{})}),t.jsx("div",{className:"w-1/3 max-sm:w-1/2 h-[180px] border",children:t.jsx(J.Z,{})})]}),t.jsx("div",{className:"w-1/2 max-lg:w-full",children:t.jsx(K,{date:m,meal_type:u})})]}),(0,t.jsxs)("div",{className:"w-1/6 ml-4 max-lg:hidden ",children:[t.jsx("div",{className:"h-[200px] w-[200px] border",children:t.jsx(J.Z,{})}),t.jsx("div",{className:"h-[200px] w-[200px] border",children:t.jsx(J.Z,{})}),t.jsx("div",{className:"h-[200px] w-[200px] border",children:t.jsx(J.Z,{})})]})]}),(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"w-1/3 h-[180px] max-sm:w-1/2 border",children:t.jsx(J.Z,{})}),t.jsx("div",{className:"w-1/3 h-[180px] max-sm:w-1/2 border",children:t.jsx(J.Z,{})})]})]})}},72766:(e,r,s)=>{"use strict";s.d(r,{x:()=>t}),s(15424);var t=(0,s(46242).$)("be89e7bb6617af0a23ae48cefc188e6cf334430c")},47258:(e,r,s)=>{"use strict";s.d(r,{Z:()=>c});var t=s(10326);s(17577);var a=s(74132),n=s(39530);s(15424);var i=(0,s(46242).$)("6bf7eb2f2329e353b8b07e51af6396a40d5b7b8e"),l=s(3062),d=s(14357),o=s(94835);let c=({id:e})=>{let r=(0,n.TL)(),s=async()=>{try{r((0,l.Tr)(!0));let s=await i(e);if("error"in s){r((0,a.fz)({message:s.error,type:"error"})),setTimeout(()=>r((0,a.Qu)()),3e3);return}if("detail"in s){r((0,a.fz)({message:s.detail,type:"error"})),setTimeout(()=>r((0,a.Qu)()),3e3);return}"message"in s&&(r((0,a.fz)({message:s.message,type:"success"})),setTimeout(()=>r((0,a.Qu)()),3e3),r((0,d.Xl)()))}catch(e){r((0,a.fz)({message:"An error occurred while deleting the meal.",type:"error"})),setTimeout(()=>r((0,a.Qu)()),3e3)}finally{r((0,l.Tr)(!1))}};return t.jsx("div",{className:"flex items-center gap-x-2 p-2 ",children:t.jsx("button",{className:"hover:text-red-800 transition",onClick:s,children:t.jsx(o.I0,{size:15})})})}},72199:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var t=s(68570);let a=(0,t.createProxy)(String.raw`/Users/taisei_yamaguchi/Desktop/Egg-Health/frontend/src/app/dashboard/meal/[meal_type]/[date]/page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let l=(0,t.createProxy)(String.raw`/Users/taisei_yamaguchi/Desktop/Egg-Health/frontend/src/app/dashboard/meal/[meal_type]/[date]/page.tsx#default`)},19968:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,createCustomFood:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("ebc0e3185c11a268e46a358d1ed67a087a3eb887",d);async function d(e){let r=(0,a.cookies)(),s=r.get("token")?.value;return s?(await fetch(`${n.API_URL}/meals/create-food/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${s}`},body:JSON.stringify(e)})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("6a87c37439f4089f529f7fabd394372ee953399e",l)},28317:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,deleteFood:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("ce576565f535bcbad4a930e5f6814907ceefd72a",d);async function d(e){let r=(0,a.cookies)(),s=r.get("token")?.value;return s?(await fetch(`${n.API_URL}/meals/delete-food/${e}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Token ${s}`}})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("82dde3b48fab94c911a9f98f3bb8c59a069ede72",l)},30028:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,deleteMeal:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("3e8279eb3363b8a4a3ff00650dc3502ae373bfaa",d);async function d(e){let r=(0,a.cookies)(),s=r.get("token")?.value;return s?(await fetch(`${n.API_URL}/meals/delete-meal/${e}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Token ${s}`}})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("6bf7eb2f2329e353b8b07e51af6396a40d5b7b8e",l)},2449:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,fetchCustomFoods:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("17ee4cb4022629faba02605e0e8af8a8c9645713",d);async function d(){let e=(0,a.cookies)(),r=e.get("token")?.value;return r?(await fetch(`${n.API_URL}/meals/custom-food-list/`,{method:"GET",headers:{"content-type":"application/json",Authorization:`Token ${r}`}})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("ed632e20977b91e6ea402bab649de27090a0ee47",l)},13698:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,fetchFoodsHistory:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("cb9186e00c5be01753f62155531b4e6cef15b991",d);async function d(){let e=(0,a.cookies)(),r=e.get("token")?.value;return r?(await fetch(`${n.API_URL}/meals/get-food-history/`,{method:"GET",headers:{"content-type":"application/json",Authorization:`Token ${r}`}})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("367dc209dd2fdf097b31f5b71e50ba108ae3f123",l)},57076:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,fetchMeals:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("f1eedbe3c169d127f552e5c5d8c985e931af6b27",d);async function d(e,r){let s=(0,a.cookies)(),t=s.get("token")?.value;return t?(await fetch(`${n.API_URL}/meals/get-meal/${e}/${r}/`,{method:"GET",headers:{"content-type":"application/json",Authorization:`Token ${t}`}})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("be89e7bb6617af0a23ae48cefc188e6cf334430c",l)},86489:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,registerMeal:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("a1666b55b2fc94ed021a59ca290beb7092675d72",d);async function d(e){let r=(0,a.cookies)(),s=r.get("token")?.value;return s?(await fetch(`${n.API_URL}/meals/create-meal/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${s}`},body:JSON.stringify(e)})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("813f4d442d2c9b92710ddf1212296598abc28c6a",l)},84291:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,searchFatsecretFoods:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("da73c8e80e35425672d08afa96053fc232e748c8",d);async function d(e){let r=(0,a.cookies)(),s=r.get("token")?.value;return s?(await fetch(`${n.API_URL}/meals/search-fatsecret/?search_key=${e}`,{method:"GET",headers:{"content-type":"application/json",Authorization:`Token ${s}`}})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("19cb0e72dbbcbcf49c393ba7e48690d825ebad7c",l)},26210:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$ACTION_0:()=>d,updateMeal:()=>l});var t=s(27745);s(26461);var a=s(53973),n=s(97228),i=s(85723);let l=(0,t.registerServerReference)("75e4cf5a8d25542c8dba192139597868e4624336",d);async function d(e,r){let s=(0,a.cookies)(),t=s.get("token")?.value;return t?(await fetch(`${n.API_URL}/meals/update-meal/${r}/`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Token ${t}`},body:JSON.stringify(e)})).json():{error:"Token not found"}}(0,i.ensureServerEntryExports)([l]),(0,t.registerServerReference)("6970731a6fa653ebb8b0fe3aa1d9c8b58ec5a081",l)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[8948,7211,4046,9632,1855,18,2741,130,7376],()=>s(6437));module.exports=t})();